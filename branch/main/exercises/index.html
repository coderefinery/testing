

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>List of exercises &mdash; Automated testing  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=949a1ff5" />
      <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx_lesson.css?v=e9df6548" />
      <link rel="stylesheet" type="text/css" href="../_static/term_role_formatting.css?v=4194e21c" />
      <link rel="stylesheet" type="text/css" href="../_static/sphinx_rtd_theme_ext_color_contrast.css?v=8e8ea19f" />
      <link rel="stylesheet" type="text/css" href="../_static/tabs.css?v=a5c4661c" />

  
    <link rel="shortcut icon" href="../_static/coderefinery.ico"/>
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=187304be"></script>
      <script src="../_static/doctools.js?v=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
      <script src="../_static/copybutton.js?v=582ca9e2"></script>
      <script src="../_static/minipres.js?v=a0d29692"></script>
      <script>let toggleHintShow = 'Click to show';</script>
      <script>let toggleHintHide = 'Click to hide';</script>
      <script>let toggleOpenOnPrint = 'true';</script>
      <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
      <script src="../_static/tabs.js?v=3030b3cb"></script>
      <script data-domain="coderefinery.github.io" defer="defer" src="https://plausible.cs.aalto.fi/js/script.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex/" />
    <link rel="search" title="Search" href="../search/" />
    <link rel="next" title="Quick Reference" href="../quick-reference/" />
    <link rel="prev" title="(Optional) Full-cycle collaborative workflow" href="../full-cycle-ci/" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../" class="icon icon-home">
            Automated testing
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">The lesson</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../motivation/">Motivation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../locally/">Testing locally</a></li>
<li class="toctree-l1"><a class="reference internal" href="../continuous-integration/">Automated testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../test-design/">Test design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../conclusions/">Conclusions and recommendations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../full-cycle-ci/">(Optional) Full-cycle collaborative workflow</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference external" href="https://youtu.be/xbTTDLA3txI">Shell crash course</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">List of exercises</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#full-list">Full list</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../quick-reference/">Quick Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../guide/">Instructor guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://coderefinery.org/lessons/core/">All lessons</a></li>
<li class="toctree-l1"><a class="reference external" href="https://coderefinery.org/">CodeRefinery</a></li>
<li class="toctree-l1"><a class="reference external" href="https://coderefinery.org/lessons/reusing/">Reusing</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../">Automated testing</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">List of exercises</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/coderefinery/testing/blob/main/content/exercises.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="list-of-exercises">
<h1>List of exercises<a class="headerlink" href="#list-of-exercises" title="Link to this heading"></a></h1>
<section id="full-list">
<h2>Full list<a class="headerlink" href="#full-list" title="Link to this heading"></a></h2>
<p>This is a list of all exercises and solutions in this lesson, mainly
as a reference for helpers and instructors.  This list is
automatically generated from all of the other pages in the lesson.
Any single teaching event will probably cover only a subset of these,
depending on their interests.</p>
<section id="testing-locally">
<h3>Testing locally<a class="headerlink" href="#testing-locally" title="Link to this heading"></a></h3>
<p><a class="reference external" href="../locally/#exercise-0">In locally.md:</a></p>
<div class="admonition-local-1-create-a-minimal-example-15-min exercise important admonition" id="exercise-0">
<p class="admonition-title">Local-1: Create a minimal example (15 min)</p>
<p>In this exercise, we will create a minimal example using
the <a class="reference external" href="http://doc.pytest.org">pytest</a>, run the test, and show what
happens when a test breaks.</p>
<ol class="arabic">
<li><p>Create a new directory and change into it:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>mkdir<span class="w"> </span>local-testing-example
<span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>local-testing-example
</pre></div>
</div>
</li>
<li><p>Create an example file and paste the following code into it</p></li>
</ol>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-0-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-0-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-0-Ug==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-Ug==" name="Ug==" role="tab" tabindex="-1">R</button><button aria-controls="panel-0-SnVsaWE=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-SnVsaWE=" name="SnVsaWE=" role="tab" tabindex="-1">Julia</button><button aria-controls="panel-0-Qysr" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-0-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button></div><div aria-labelledby="tab-0-UHl0aG9u" class="sphinx-tabs-panel group-tab" id="panel-0-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><p>Create <code class="docutils literal notranslate"><span class="pre">example.py</span></code> with content</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_add</span><span class="p">():</span>
    <span class="k">assert</span> <span class="n">add</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span>
    <span class="k">assert</span> <span class="n">add</span><span class="p">(</span><span class="s1">&#39;space&#39;</span><span class="p">,</span> <span class="s1">&#39;ship&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="s1">&#39;spaceship&#39;</span>
</pre></div>
</div>
<p>This code contains one genuine function and a test function.
<code class="docutils literal notranslate"><span class="pre">pytest</span></code> finds any functions beginning with <code class="docutils literal notranslate"><span class="pre">test_</span></code> and treats them
as tests.</p>
</div><div aria-labelledby="tab-0-Ug==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-Ug==" name="Ug==" role="tabpanel" tabindex="0"><p>Create <code class="docutils literal notranslate"><span class="pre">example.R</span></code> with content</p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nf">require</span><span class="p">(</span><span class="n">testthat</span><span class="p">))</span><span class="w"> </span><span class="nf">install.packages</span><span class="p">(</span><span class="n">testthat</span><span class="p">)</span>
<span class="n">add</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kr">return</span><span class="p">(</span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">)</span>
<span class="p">}</span>

<span class="nf">test_that</span><span class="p">(</span><span class="s">&quot;Adding integers works&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">res</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">)</span>

<span class="w">    </span><span class="c1"># Test that the result has the correct value</span>
<span class="w">    </span><span class="nf">expect_identical</span><span class="p">(</span><span class="n">res</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">)</span>

<span class="w">    </span><span class="c1"># Test that the result is numeric</span>
<span class="w">    </span><span class="nf">expect_true</span><span class="p">(</span><span class="nf">is.numeric</span><span class="p">(</span><span class="n">res</span><span class="p">))</span>
<span class="p">})</span>
</pre></div>
</div>
<p>A test with <code class="docutils literal notranslate"><span class="pre">testthat</span></code> is created by calling
<code class="docutils literal notranslate"><span class="pre">test_that()</span></code> with a test name and code as arguments.</p>
</div><div aria-labelledby="tab-0-SnVsaWE=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-SnVsaWE=" name="SnVsaWE=" role="tabpanel" tabindex="0"><p>Create <code class="docutils literal notranslate"><span class="pre">example.jl</span></code> with content</p>
<div class="highlight-Julia notranslate"><div class="highlight"><pre><span></span><span class="k">function</span><span class="w"> </span><span class="n">myadd</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span><span class="w"> </span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="o">+</span><span class="n">b</span>
<span class="k">end</span>

<span class="k">using</span><span class="w"> </span><span class="n">Test</span>
<span class="nd">@testset</span><span class="w"> </span><span class="s">&quot;myadd&quot;</span><span class="w"> </span><span class="k">begin</span>
<span class="w">    </span><span class="nd">@test</span><span class="w"> </span><span class="n">myadd</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">5</span>
<span class="k">end</span>
</pre></div>
</div>
<p>The package <code class="docutils literal notranslate"><span class="pre">Test.jl</span></code> handles all testing.
A test(set) is added with <code class="docutils literal notranslate"><span class="pre">&#64;testset</span></code>
and a test itself with <code class="docutils literal notranslate"><span class="pre">&#64;test</span></code>.</p>
</div><div aria-labelledby="tab-0-Qysr" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-0-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-Q2F0Y2gy" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-1-Q2F0Y2gy" name="Q2F0Y2gy" role="tab" tabindex="0">Catch2</button><button aria-controls="panel-1-R29vZ2xlVGVzdA==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-1-R29vZ2xlVGVzdA==" name="R29vZ2xlVGVzdA==" role="tab" tabindex="-1">GoogleTest</button></div><div aria-labelledby="tab-1-Q2F0Y2gy" class="sphinx-tabs-panel group-tab" id="panel-1-Q2F0Y2gy" name="Q2F0Y2gy" role="tabpanel" tabindex="0"><p>Create <code class="docutils literal notranslate"><span class="pre">example.cc</span></code> with content</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;catch2/catch_test_macros.hpp&gt;</span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Number</span><span class="o">&gt;</span>
<span class="n">Number</span>
<span class="n">add</span><span class="p">(</span><span class="n">Number</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">Number</span><span class="w"> </span><span class="n">b</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<span class="p">}</span><span class="w">    </span>

<span class="n">TEST_CASE</span><span class="p">(</span><span class="s">&quot;IntTest&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;[add]&quot;</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">REQUIRE</span><span class="p">(</span><span class="n">add</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="o">==</span><span class="mi">5</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>and <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> with content</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span><span class="w"> </span><span class="s">3.14</span><span class="p">)</span>
<span class="nb">project</span><span class="p">(</span><span class="s">test_example</span><span class="w"> </span><span class="s">CXX</span><span class="p">)</span>

<span class="nb">cmake_policy</span><span class="p">(</span><span class="s">SET</span><span class="w"> </span><span class="s">CMP0135</span><span class="w"> </span><span class="s">OLD</span><span class="p">)</span>

<span class="c">#Tell CMake to Download Catch2 library</span>
<span class="nb">include</span><span class="p">(</span><span class="s">FetchContent</span><span class="p">)</span>
<span class="nb">FetchContent_Declare</span><span class="p">(</span>
<span class="w">    </span><span class="s">Catch2</span>
<span class="w">    </span><span class="s">GIT_REPOSITORY</span><span class="w"> </span><span class="s">https://github.com/catchorg/Catch2.git</span>
<span class="w">    </span><span class="s">GIT_TAG</span><span class="w">        </span><span class="s">v3.4.0</span><span class="w"> </span><span class="c"># or a later release</span>
<span class="p">)</span>
<span class="nb">FetchContent_MakeAvailable</span><span class="p">(</span><span class="s">Catch2</span><span class="p">)</span>

<span class="c">#Setup testing</span>
<span class="nb">enable_testing</span><span class="p">()</span>
<span class="c">#add test executable</span>
<span class="nb">add_executable</span><span class="p">(</span><span class="s">example</span><span class="w"> </span><span class="s">example.cc</span><span class="p">)</span>
<span class="c">#link Catch2 to example</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">example</span><span class="w"> </span><span class="s">PRIVATE</span><span class="w"> </span><span class="s">Catch2::Catch2WithMain</span><span class="p">)</span>
<span class="c">#Make Catch2 look for tests</span>
<span class="nb">include</span><span class="p">(</span><span class="s">Catch</span><span class="p">)</span>
<span class="nb">catch_discover_tests</span><span class="p">(</span><span class="s">example</span><span class="p">)</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-1-R29vZ2xlVGVzdA==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-1-R29vZ2xlVGVzdA==" name="R29vZ2xlVGVzdA==" role="tabpanel" tabindex="0"><p>Create <code class="docutils literal notranslate"><span class="pre">example.cc</span></code> with content</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;gtest/gtest.h&gt;</span>

<span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Number</span><span class="o">&gt;</span>
<span class="n">Number</span>
<span class="n">add</span><span class="p">(</span><span class="n">Number</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">Number</span><span class="w"> </span><span class="n">b</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<span class="p">}</span><span class="w">    </span>

<span class="n">TEST</span><span class="p">(</span><span class="n">AddTests</span><span class="p">,</span><span class="w"> </span><span class="n">IntTest</span><span class="p">)</span>
<span class="p">{</span>
<span class="w">  </span><span class="n">ASSERT_EQ</span><span class="p">(</span><span class="n">add</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">),</span><span class="mi">5</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>and <code class="docutils literal notranslate"><span class="pre">CMakeLists.txt</span></code> with content</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">cmake_minimum_required</span><span class="p">(</span><span class="s">VERSION</span><span class="w"> </span><span class="s">3.14</span><span class="p">)</span>
<span class="nb">project</span><span class="p">(</span><span class="s">test_example</span><span class="w"> </span><span class="s">CXX</span><span class="p">)</span>

<span class="nb">cmake_policy</span><span class="p">(</span><span class="s">SET</span><span class="w"> </span><span class="s">CMP0135</span><span class="w"> </span><span class="s">OLD</span><span class="p">)</span>

<span class="c">#Tell CMake to Download Googletest library</span>
<span class="nb">include</span><span class="p">(</span><span class="s">FetchContent</span><span class="p">)</span>
<span class="nb">FetchContent_Declare</span><span class="p">(</span>
<span class="w">    </span><span class="s">googletest</span>
<span class="w">    </span><span class="s">URL</span><span class="w"> </span><span class="s">https://github.com/google/googletest/archive/03597a01ee50ed33e9dfd640b249b4be3799d395.zip</span>
<span class="p">)</span>
<span class="c"># For Windows: Prevent overriding the parent project&#39;s compiler/linker settings</span>
<span class="nb">set</span><span class="p">(</span><span class="s">gtest_force_shared_crt</span><span class="w"> </span><span class="s">ON</span><span class="w"> </span><span class="s">CACHE</span><span class="w"> </span><span class="s">BOOL</span><span class="w"> </span><span class="s2">&quot;&quot;</span><span class="w"> </span><span class="s">FORCE</span><span class="p">)</span>
<span class="nb">FetchContent_MakeAvailable</span><span class="p">(</span><span class="s">googletest</span><span class="p">)</span>

<span class="c">#Setup testing</span>
<span class="nb">enable_testing</span><span class="p">()</span>
<span class="c">#add test executable</span>
<span class="nb">add_executable</span><span class="p">(</span><span class="s">example</span><span class="w"> </span><span class="s">example.cc</span><span class="p">)</span>
<span class="c">#link Googletest to example</span>
<span class="nb">target_link_libraries</span><span class="p">(</span><span class="s">example</span><span class="w"> </span><span class="s">GTest::gtest_main</span><span class="p">)</span>
<span class="c">#Make googletest look for tests</span>
<span class="nb">include</span><span class="p">(</span><span class="s">GoogleTest</span><span class="p">)</span>
<span class="nb">gtest_discover_tests</span><span class="p">(</span><span class="s">example</span><span class="p">)</span>
</pre></div>
</div>
</div></div>
</div></div>
<ol class="arabic simple" start="3">
<li><p>Run the test</p></li>
</ol>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-2-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-2-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-2-Ug==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-2-Ug==" name="Ug==" role="tab" tabindex="-1">R</button><button aria-controls="panel-2-SnVsaWE=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-2-SnVsaWE=" name="SnVsaWE=" role="tab" tabindex="-1">Julia</button><button aria-controls="panel-2-Qysr" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-2-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button></div><div aria-labelledby="tab-2-UHl0aG9u" class="sphinx-tabs-panel group-tab" id="panel-2-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pytest<span class="w"> </span>-v<span class="w"> </span>example.py

<span class="go">============================================================ test session starts =================================</span>
<span class="go">platform linux -- Python 3.7.2, pytest-4.3.1, py-1.8.0, pluggy-0.9.0 -- /home/user/pytest-example/venv/bin/python3</span>
<span class="go">cachedir: .pytest_cache</span>
<span class="go">rootdir: /home/user/pytest-example, inifile:</span>
<span class="go">collected 1 item</span>

<span class="go">example.py::test_add PASSED</span>

<span class="go">========================================================= 1 passed in 0.01 seconds ===============================</span>
</pre></div>
</div>
<p>Yay! The test passed!</p>
<p>Hint for participants trying this inside Spyder or IPython: try <code class="docutils literal notranslate"><span class="pre">!pytest</span> <span class="pre">-v</span> <span class="pre">example.py</span></code>.</p>
</div><div aria-labelledby="tab-2-Ug==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-2-Ug==" name="Ug==" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>Rscript<span class="w"> </span>example.R<span class="w"> </span>

<span class="go">Loading required package: testthat</span>
<span class="go">Test passed 🎉 </span>
</pre></div>
</div>
<p>Yay! The test passed!</p>
<p>Note that the emoji is random and might be different for you.</p>
</div><div aria-labelledby="tab-2-SnVsaWE=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-2-SnVsaWE=" name="SnVsaWE=" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>julia<span class="w"> </span>example.jl<span class="w"> </span>

<span class="go">Test Summary: | Pass  Total  Time</span>
<span class="go">myadd         |    1      1  0.0s</span>
</pre></div>
</div>
<p>Yay! The test passed!</p>
</div><div aria-labelledby="tab-2-Qysr" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-2-Qysr" name="Qysr" role="tabpanel" tabindex="0"><p>As this is the only compiled language in the examples we have to do a few more steps.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-3-Q2F0Y2gy" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-3-Q2F0Y2gy" name="Q2F0Y2gy" role="tab" tabindex="0">Catch2</button><button aria-controls="panel-3-R29vZ2xlVGVzdA==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-3-R29vZ2xlVGVzdA==" name="R29vZ2xlVGVzdA==" role="tab" tabindex="-1">GoogleTest</button></div><div aria-labelledby="tab-3-Q2F0Y2gy" class="sphinx-tabs-panel group-tab" id="panel-3-Q2F0Y2gy" name="Q2F0Y2gy" role="tabpanel" tabindex="0"><p>Starting with the configure step of CMake
(Note that <code class="docutils literal notranslate"><span class="pre">&lt;path&gt;</span></code> will be different for everyone)</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cmake<span class="w"> </span>-S.<span class="w"> </span>-Bbuild
<span class="go">-- The CXX compiler identification is GNU 13.2.0</span>
<span class="go">-- Detecting CXX compiler ABI info</span>
<span class="go">-- Detecting CXX compiler ABI info - done</span>
<span class="go">-- Check for working CXX compiler: /usr/bin/c++ - skipped</span>
<span class="go">-- Detecting CXX compile features</span>
<span class="go">-- Detecting CXX compile features - done</span>
<span class="go">-- Performing Test HAVE_FLAG__ffile_prefix_map__&lt;path&gt;_build__deps_catch2_src__</span>
<span class="go">-- Performing Test HAVE_FLAG__ffile_prefix_map__&lt;path&gt;_build__deps_catch2_src__ - Success</span>
<span class="go">-- Configuring done (4.1s)</span>
<span class="go">-- Generating done (0.0s)</span>
<span class="go">-- Build files have been written to: &lt;path&gt;/build</span>
</pre></div>
</div>
<p>and the build step which will also download Catch2 on the first run</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cmake<span class="w"> </span>--build<span class="w"> </span>build
<span class="go">[  0%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/benchmark/catch_chronometer.cpp.o</span>
<span class="go">[  1%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/benchmark/detail/catch_benchmark_function.cpp.o</span>
<span class="go">[  2%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/benchmark/detail/catch_run_for_at_least.cpp.o</span>
<span class="go">[  3%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/benchmark/detail/catch_stats.cpp.o</span>
<span class="go">[  4%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/generators/catch_generator_exception.cpp.o</span>
<span class="go">[  5%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/generators/catch_generators.cpp.o</span>
<span class="go">[  6%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/generators/catch_generators_random.cpp.o</span>
<span class="go">[  7%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/reporters/catch_reporter_automake.cpp.o</span>
<span class="go">[  8%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/reporters/catch_reporter_common_base.cpp.o</span>
<span class="go">[  9%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/reporters/catch_reporter_compact.cpp.o</span>
<span class="go">[ 10%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/reporters/catch_reporter_console.cpp.o</span>
<span class="go">[ 11%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/reporters/catch_reporter_cumulative_base.cpp.o</span>
<span class="go">[ 12%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/reporters/catch_reporter_event_listener.cpp.o</span>
<span class="go">[ 12%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/reporters/catch_reporter_helpers.cpp.o</span>
<span class="go">[ 13%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/reporters/catch_reporter_junit.cpp.o</span>
<span class="go">[ 14%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/reporters/catch_reporter_multi.cpp.o</span>
<span class="go">[ 15%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/reporters/catch_reporter_registrars.cpp.o</span>
<span class="go">[ 16%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/reporters/catch_reporter_sonarqube.cpp.o</span>
<span class="go">[ 17%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/reporters/catch_reporter_streaming_base.cpp.o</span>
<span class="go">[ 18%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/reporters/catch_reporter_tap.cpp.o</span>
<span class="go">[ 19%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/reporters/catch_reporter_teamcity.cpp.o</span>
<span class="go">[ 20%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/reporters/catch_reporter_xml.cpp.o</span>
<span class="go">[ 21%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/interfaces/catch_interfaces_capture.cpp.o</span>
<span class="go">[ 22%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/interfaces/catch_interfaces_config.cpp.o</span>
<span class="go">[ 23%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/interfaces/catch_interfaces_exception.cpp.o</span>
<span class="go">[ 24%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/interfaces/catch_interfaces_generatortracker.cpp.o</span>
<span class="go">[ 25%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/interfaces/catch_interfaces_registry_hub.cpp.o</span>
<span class="go">[ 25%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/interfaces/catch_interfaces_reporter.cpp.o</span>
<span class="go">[ 26%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/interfaces/catch_interfaces_reporter_factory.cpp.o</span>
<span class="go">[ 27%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/interfaces/catch_interfaces_testcase.cpp.o</span>
<span class="go">[ 28%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/catch_approx.cpp.o</span>
<span class="go">[ 29%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/catch_assertion_result.cpp.o</span>
<span class="go">[ 30%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/catch_config.cpp.o</span>
<span class="go">[ 31%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/catch_get_random_seed.cpp.o</span>
<span class="go">[ 32%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/catch_message.cpp.o</span>
<span class="go">[ 33%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/catch_registry_hub.cpp.o</span>
<span class="go">[ 34%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/catch_session.cpp.o</span>
<span class="go">[ 35%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/catch_tag_alias_autoregistrar.cpp.o</span>
<span class="go">[ 36%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/catch_test_case_info.cpp.o</span>
<span class="go">[ 37%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/catch_test_spec.cpp.o</span>
<span class="go">[ 37%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/catch_timer.cpp.o</span>
<span class="go">[ 38%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/catch_tostring.cpp.o</span>
<span class="go">[ 39%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/catch_totals.cpp.o</span>
<span class="go">[ 40%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/catch_translate_exception.cpp.o</span>
<span class="go">[ 41%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/catch_version.cpp.o</span>
<span class="go">[ 42%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_assertion_handler.cpp.o</span>
<span class="go">[ 43%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_case_insensitive_comparisons.cpp.o</span>
<span class="go">[ 44%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_clara.cpp.o</span>
<span class="go">[ 45%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_commandline.cpp.o</span>
<span class="go">[ 46%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_console_colour.cpp.o</span>
<span class="go">[ 47%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_context.cpp.o</span>
<span class="go">[ 48%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_debug_console.cpp.o</span>
<span class="go">[ 49%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_debugger.cpp.o</span>
<span class="go">[ 50%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_decomposer.cpp.o</span>
<span class="go">[ 50%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_enforce.cpp.o</span>
<span class="go">[ 51%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_enum_values_registry.cpp.o</span>
<span class="go">[ 52%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_errno_guard.cpp.o</span>
<span class="go">[ 53%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_exception_translator_registry.cpp.o</span>
<span class="go">[ 54%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_fatal_condition_handler.cpp.o</span>
<span class="go">[ 55%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_floating_point_helpers.cpp.o</span>
<span class="go">[ 56%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_getenv.cpp.o</span>
<span class="go">[ 57%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_istream.cpp.o</span>
<span class="go">[ 58%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_lazy_expr.cpp.o</span>
<span class="go">[ 59%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_leak_detector.cpp.o</span>
<span class="go">[ 60%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_list.cpp.o</span>
<span class="go">[ 61%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_message_info.cpp.o</span>
<span class="go">[ 62%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_output_redirect.cpp.o</span>
<span class="go">[ 62%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_parse_numbers.cpp.o</span>
<span class="go">[ 63%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_polyfills.cpp.o</span>
<span class="go">[ 64%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_random_number_generator.cpp.o</span>
<span class="go">[ 65%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_random_seed_generation.cpp.o</span>
<span class="go">[ 66%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_reporter_registry.cpp.o</span>
<span class="go">[ 67%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_reporter_spec_parser.cpp.o</span>
<span class="go">[ 68%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_result_type.cpp.o</span>
<span class="go">[ 69%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_reusable_string_stream.cpp.o</span>
<span class="go">[ 70%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_run_context.cpp.o</span>
<span class="go">[ 71%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_section.cpp.o</span>
<span class="go">[ 72%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_singletons.cpp.o</span>
<span class="go">[ 73%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_source_line_info.cpp.o</span>
<span class="go">[ 74%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_startup_exception_registry.cpp.o</span>
<span class="go">[ 75%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_stdstreams.cpp.o</span>
<span class="go">[ 75%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_string_manip.cpp.o</span>
<span class="go">[ 76%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_stringref.cpp.o</span>
<span class="go">[ 77%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_tag_alias_registry.cpp.o</span>
<span class="go">[ 78%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_test_case_info_hasher.cpp.o</span>
<span class="go">[ 79%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_test_case_registry_impl.cpp.o</span>
<span class="go">[ 80%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_test_case_tracker.cpp.o</span>
<span class="go">[ 81%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_test_failure_exception.cpp.o</span>
<span class="go">[ 82%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_test_registry.cpp.o</span>
<span class="go">[ 83%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_test_spec_parser.cpp.o</span>
<span class="go">[ 84%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_textflow.cpp.o</span>
<span class="go">[ 85%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_uncaught_exceptions.cpp.o</span>
<span class="go">[ 86%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_wildcard_pattern.cpp.o</span>
<span class="go">[ 87%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/internal/catch_xmlwriter.cpp.o</span>
<span class="go">[ 87%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/matchers/catch_matchers.cpp.o</span>
<span class="go">[ 88%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/matchers/catch_matchers_container_properties.cpp.o</span>
<span class="go">[ 89%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/matchers/catch_matchers_exception.cpp.o</span>
<span class="go">[ 90%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/matchers/catch_matchers_floating_point.cpp.o</span>
<span class="go">[ 91%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/matchers/catch_matchers_predicate.cpp.o</span>
<span class="go">[ 92%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/matchers/catch_matchers_quantifiers.cpp.o</span>
<span class="go">[ 93%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/matchers/catch_matchers_string.cpp.o</span>
<span class="go">[ 94%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/matchers/catch_matchers_templated.cpp.o</span>
<span class="go">[ 95%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2.dir/catch2/matchers/internal/catch_matchers_impl.cpp.o</span>
<span class="go">[ 96%] Linking CXX static library libCatch2.a</span>
<span class="go">[ 96%] Built target Catch2</span>
<span class="go">[ 97%] Building CXX object _deps/catch2-build/src/CMakeFiles/Catch2WithMain.dir/catch2/internal/catch_main.cpp.o</span>
<span class="go">[ 98%] Linking CXX static library libCatch2Main.a</span>
<span class="go">[ 98%] Built target Catch2WithMain</span>
<span class="go">[ 99%] Building CXX object CMakeFiles/example.dir/example.cc.o</span>
<span class="go">[100%] Linking CXX executable example</span>
<span class="go">[100%] Built target example</span>
</pre></div>
</div>
<p>Finally, we change into the <code class="docutils literal notranslate"><span class="pre">build</span></code> directory
and run CTest</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>build
<span class="gp">$ </span>ctest
<span class="go">Test project &lt;path&gt;/build</span>
<span class="go">    Start 1: IntTest</span>
<span class="go">1/1 Test #1: IntTest ..........................   Passed    0.01 sec</span>

<span class="go">100% tests passed, 0 tests failed out of 1</span>

<span class="go">Total Test time (real) =   0.01 sec</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-3-R29vZ2xlVGVzdA==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-3-R29vZ2xlVGVzdA==" name="R29vZ2xlVGVzdA==" role="tabpanel" tabindex="0"><p>Starting with the configure step of CMake
(Note that <code class="docutils literal notranslate"><span class="pre">&lt;path&gt;</span></code> will be different for everyone)</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cmake<span class="w"> </span>-S.<span class="w"> </span>-Bbuild
<span class="go">-- The CXX compiler identification is GNU 13.2.0</span>
<span class="go">-- Detecting CXX compiler ABI info</span>
<span class="go">-- Detecting CXX compiler ABI info - done</span>
<span class="go">-- Check for working CXX compiler: /usr/bin/c++ - skipped</span>
<span class="go">-- Detecting CXX compile features</span>
<span class="go">-- Detecting CXX compile features - done</span>
<span class="go">-- The C compiler identification is GNU 13.2.0</span>
<span class="go">-- Detecting C compiler ABI info</span>
<span class="go">-- Detecting C compiler ABI info - done</span>
<span class="go">-- Check for working C compiler: /usr/bin/cc - skipped</span>
<span class="go">-- Detecting C compile features</span>
<span class="go">-- Detecting C compile features - done</span>
<span class="go">-- Performing Test CMAKE_HAVE_LIBC_PTHREAD</span>
<span class="go">-- Performing Test CMAKE_HAVE_LIBC_PTHREAD - Success</span>
<span class="go">-- Found Threads: TRUE  </span>
<span class="go">-- Configuring done (2.1s)</span>
<span class="go">-- Generating done (0.0s)</span>
<span class="go">-- Build files have been written to: &lt;path&gt;/build</span>
</pre></div>
</div>
<p>and the build step which will also download GoogleTest on the first run</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cmake<span class="w"> </span>--build<span class="w"> </span>build
<span class="go">[ 10%] Building CXX object _deps/googletest-build/googletest/CMakeFiles/gtest.dir/src/gtest-all.cc.o</span>
<span class="go">[ 20%] Linking CXX static library ../../../lib/libgtest.a</span>
<span class="go">[ 20%] Built target gtest</span>
<span class="go">[ 30%] Building CXX object _deps/googletest-build/googletest/CMakeFiles/gtest_main.dir/src/gtest_main.cc.o</span>
<span class="go">[ 40%] Linking CXX static library ../../../lib/libgtest_main.a</span>
<span class="go">[ 40%] Built target gtest_main</span>
<span class="go">[ 50%] Building CXX object CMakeFiles/example.dir/example.cc.o</span>
<span class="go">[ 60%] Linking CXX executable example</span>
<span class="go">[ 60%] Built target example</span>
<span class="go">[ 70%] Building CXX object _deps/googletest-build/googlemock/CMakeFiles/gmock.dir/src/gmock-all.cc.o</span>
<span class="go">[ 80%] Linking CXX static library ../../../lib/libgmock.a</span>
<span class="go">[ 80%] Built target gmock</span>
<span class="go">[ 90%] Building CXX object _deps/googletest-build/googlemock/CMakeFiles/gmock_main.dir/src/gmock_main.cc.o</span>
<span class="go">[100%] Linking CXX static library ../../../lib/libgmock_main.a</span>
<span class="go">[100%] Built target gmock_main</span>
</pre></div>
</div>
<p>Finally, we change into the <code class="docutils literal notranslate"><span class="pre">build</span></code> directory
and run CTest</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">cd</span><span class="w"> </span>build
<span class="gp">$ </span>ctest
<span class="go">Test project &lt;path&gt;/build</span>
<span class="go">    Start 1: AddTests.IntTest</span>
<span class="go">1/1 Test #1: AddTests.IntTest .................   Passed    0.00 sec</span>

<span class="go">100% tests passed, 0 tests failed out of 1</span>

<span class="go">Total Test time (real) =   0.01 sec</span>
</pre></div>
</div>
</div></div>
</div></div>
<ol class="arabic simple" start="4">
<li><p>Let us break the test!</p></li>
</ol>
<p>Introduce a code change which breaks the code (e.g. <code class="docutils literal notranslate"><span class="pre">-</span></code> instead of <code class="docutils literal notranslate"><span class="pre">+</span></code>) and check
whether our test detects the change:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-4-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-4-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-4-Ug==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-4-Ug==" name="Ug==" role="tab" tabindex="-1">R</button><button aria-controls="panel-4-SnVsaWE=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-4-SnVsaWE=" name="SnVsaWE=" role="tab" tabindex="-1">Julia</button><button aria-controls="panel-4-Qysr" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-4-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button></div><div aria-labelledby="tab-4-UHl0aG9u" class="sphinx-tabs-panel group-tab" id="panel-4-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>pytest<span class="w"> </span>-v<span class="w"> </span>example.py

<span class="go">============================================================ test session starts =================================</span>
<span class="go">platform linux -- Python 3.7.2, pytest-4.3.1, py-1.8.0, pluggy-0.9.0 -- /home/user/pytest-example/venv/bin/python3</span>
<span class="go">cachedir: .pytest_cache</span>
<span class="go">rootdir: /home/user/pytest-example, inifile:</span>
<span class="go">collected 1 item</span>

<span class="go">example.py::test_add FAILED</span>

<span class="go">================================================================= FAILURES =======================================</span>
<span class="go">_________________________________________________________________ test_add _______________________________________</span>

<span class="go">    def test_add():</span>
<span class="go">&gt;       assert add(2, 3) == 5</span>
<span class="go">E       assert -1 == 5</span>
<span class="go">E         --1</span>
<span class="go">E         +5</span>

<span class="go">example.py:6: AssertionError</span>
<span class="go">========================================================= 1 failed in 0.05 seconds ==============</span>
</pre></div>
</div>
<p>Notice how pytest is smart and includes context: lines that failed,
values of the relevant variables.</p>
</div><div aria-labelledby="tab-4-Ug==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-4-Ug==" name="Ug==" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>Rscript<span class="w"> </span>example.R<span class="w"> </span>

<span class="go">── Failure: Adding integers works ──────────────────────────────</span>
<span class="go">`res` not identical to 5.</span>
<span class="go">1/1 mismatches</span>
<span class="go">[1] -1 - 5 == -6</span>

<span class="go">Error: Test failed</span>
<span class="go">Execution halted</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">testthat</span></code> tells us exactly which test failed and how
but does not include more context.</p>
</div><div aria-labelledby="tab-4-SnVsaWE=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-4-SnVsaWE=" name="SnVsaWE=" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>julia<span class="w"> </span>example.jl

<span class="go">myadd: Test Failed at /home/user/local-testing-example/example.jl:7</span>
<span class="go">Expression: myadd(2, 3) == 5</span>
<span class="go">Evaluated: -1 == 5</span>

<span class="go">Stacktrace:</span>
<span class="go">[1] macro expansion</span>
<span class="go">@ ~/opt/julia-1.10.0/share/julia/stdlib/v1.10/Test/src/Test.jl:672 [inlined]</span>
<span class="go">[2] macro expansion</span>
<span class="go">@ ~/local-testing-example/example.jl:7 [inlined]</span>
<span class="go">[3] macro expansion</span>
<span class="go">@ ~/opt/julia-1.10.0/share/julia/stdlib/v1.10/Test/src/Test.jl:1577 [inlined]</span>
<span class="go">[4] top-level scope</span>
<span class="go">@ ~/local-testing-example/example.jl:7</span>
<span class="go">Test Summary: | Fail  Total  Time</span>
<span class="go">myadd         |    1      1  0.6s</span>
<span class="go">ERROR: LoadError: Some tests did not pass: 0 passed, 1 failed, 0 errored, 0 broken.</span>
<span class="go">in expression starting at /home/user/local-testing-example/example.jl:6</span>
</pre></div>
</div>
<p>Notice how <code class="docutils literal notranslate"><span class="pre">Test.jl</span></code> is smart and includes context:
Lines that failed, evaluated and expected results.</p>
</div><div aria-labelledby="tab-4-Qysr" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-4-Qysr" name="Qysr" role="tabpanel" tabindex="0"><p>Since we introduced a change we have to call <code class="docutils literal notranslate"><span class="pre">cmake</span> <span class="pre">--build</span> <span class="pre">build</span></code> again
(from the top directory)</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-5-Q2F0Y2gy" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-5-Q2F0Y2gy" name="Q2F0Y2gy" role="tab" tabindex="0">Catch2</button><button aria-controls="panel-5-R29vZ2xlVGVzdA==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-5-R29vZ2xlVGVzdA==" name="R29vZ2xlVGVzdA==" role="tab" tabindex="-1">GoogleTest</button></div><div aria-labelledby="tab-5-Q2F0Y2gy" class="sphinx-tabs-panel group-tab" id="panel-5-Q2F0Y2gy" name="Q2F0Y2gy" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ctest
<span class="go">Test project &lt;path&gt;/build</span>
<span class="go">    Start 1: IntTest</span>
<span class="go">1/1 Test #1: IntTest ..........................***Failed    0.01 sec</span>

<span class="go">0% tests passed, 1 tests failed out of 1</span>

<span class="go">Total Test time (real) =   0.01 sec</span>

<span class="go">The following tests FAILED:</span>
<span class="go">	  1 - IntTest (Failed)</span>
<span class="go">Output from these tests are in: &lt;path&gt;/build/Testing/Temporary/LastTest.log</span>
<span class="go">Use &quot;--rerun-failed --output-on-failure&quot; to re-run the failed cases verbosely.</span>
</pre></div>
</div>
<p>following the recommendation, we run</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ctest<span class="w"> </span>--output-on-failure
<span class="go">Test project &lt;path&gt;/build</span>
<span class="go">    Start 1: IntTest</span>
<span class="go">1/1 Test #1: IntTest ..........................***Failed    0.01 sec</span>
<span class="go">Filters: &quot;IntTest&quot;</span>
<span class="go">Randomness seeded to: 2865819826</span>

<span class="go">~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span>
<span class="go">example is a Catch2 v3.4.0 host application.</span>
<span class="go">Run with -? for options</span>

<span class="go">-------------------------------------------------------------------------------</span>
<span class="go">IntTest</span>
<span class="go">-------------------------------------------------------------------------------</span>
<span class="go">&lt;path&gt;/example.cc:10</span>
<span class="go">...............................................................................</span>

<span class="go">&lt;path&gt;/example.cc:12: FAILED:</span>
<span class="go">  REQUIRE( add(2,3)==5 )</span>
<span class="go">with expansion:</span>
<span class="go">  -1 == 5</span>

<span class="go">===============================================================================</span>
<span class="go">test cases: 1 | 1 failed</span>
<span class="go">assertions: 1 | 1 failed</span>



<span class="go">0% tests passed, 1 tests failed out of 1</span>

<span class="go">Total Test time (real) =   0.01 sec</span>

<span class="go">The following tests FAILED:</span>
<span class="go">	  1 - IntTest (Failed)</span>
<span class="go">Errors while running CTest</span>
</pre></div>
</div>
<p>This output is very verbose, but notice how it includes context: lines that failed, values of the relevant variables</p>
</div><div aria-labelledby="tab-5-R29vZ2xlVGVzdA==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-5-R29vZ2xlVGVzdA==" name="R29vZ2xlVGVzdA==" role="tabpanel" tabindex="0"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ctest
<span class="go">Test project &lt;path&gt;/build</span>
<span class="go">    Start 1: AddTests.IntTest</span>
<span class="go">1/1 Test #1: AddTests.IntTest .................***Failed    0.00 sec</span>

<span class="go">0% tests passed, 1 tests failed out of 1</span>

<span class="go">Total Test time (real) =   0.01 sec</span>

<span class="go">The following tests FAILED:</span>
<span class="go">	  1 - AddTests.IntTest (Failed)</span>
<span class="go">Errors while running CTest</span>
<span class="go">Output from these tests are in: &lt;path&gt;/build/Testing/Temporary/LastTest.log</span>
<span class="go">Use &quot;--rerun-failed --output-on-failure&quot; to re-run the failed cases verbosely.</span>
</pre></div>
</div>
<p>following the recommendation, we run</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>ctest<span class="w"> </span>--output-on-failure
<span class="go">Test project &lt;path&gt;/build</span>
<span class="go">    Start 1: AddTests.IntTest</span>
<span class="go">1/1 Test #1: AddTests.IntTest .................***Failed    0.00 sec</span>
<span class="go">Running main() from &lt;path&gt;/build/_deps/googletest-src/googletest/src/gtest_main.cc</span>
<span class="go">Note: Google Test filter = AddTests.IntTest</span>
<span class="go">[==========] Running 1 test from 1 test suite.</span>
<span class="go">[----------] Global test environment set-up.</span>
<span class="go">[----------] 1 test from AddTests</span>
<span class="go">[ RUN      ] AddTests.IntTest</span>
<span class="go">&lt;path&gt;/example.cc:12: Failure</span>
<span class="go">Expected equality of these values:</span>
<span class="go">  add(2,3)</span>
<span class="go">    Which is: -1</span>
<span class="go">  5</span>
<span class="go">[  FAILED  ] AddTests.IntTest (0 ms)</span>
<span class="go">[----------] 1 test from AddTests (0 ms total)</span>

<span class="go">[----------] Global test environment tear-down</span>
<span class="go">[==========] 1 test from 1 test suite ran. (0 ms total)</span>
<span class="go">[  PASSED  ] 0 tests.</span>
<span class="go">[  FAILED  ] 1 test, listed below:</span>
<span class="go">[  FAILED  ] AddTests.IntTest</span>

<span class="go"> 1 FAILED TEST</span>


<span class="go">0% tests passed, 1 tests failed out of 1</span>

<span class="go">Total Test time (real) =   0.01 sec</span>

<span class="go">The following tests FAILED:</span>
<span class="go">	  1 - AddTests.IntTest (Failed)</span>
<span class="go">Errors while running CTest</span>
</pre></div>
</div>
<p>This output is very verbose, but notice how it includes context: lines that failed, values of the relevant variables</p>
</div></div>
</div></div>
</div>
<p><a class="reference external" href="../locally/#exercise-1">In locally.md:</a></p>
<div class="admonition-optional-local-2-create-a-test-that-considers-numerical-tolerance-10-min exercise important admonition" id="exercise-1">
<p class="admonition-title">(optional) Local-2: Create a test that considers numerical tolerance (10 min)</p>
<p>Let’s see an example where the test has to be more clever in order to
avoid false negative.</p>
<p>In the above exercise we have compared integers.  In this optional exercise we
want to learn how to compare floating point numbers since they are more tricky
(see also <a class="reference external" href="https://floating-point-gui.de/">“What Every Programmer Should Know About Floating-Point Arithmetic”</a>).</p>
<p>The following test will fail and this might be surprising. Try it out:</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-6-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-6-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-6-Ug==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-6-Ug==" name="Ug==" role="tab" tabindex="-1">R</button><button aria-controls="panel-6-SnVsaWE=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-6-SnVsaWE=" name="SnVsaWE=" role="tab" tabindex="-1">Julia</button><button aria-controls="panel-6-Qysr" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-6-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button></div><div aria-labelledby="tab-6-UHl0aG9u" class="sphinx-tabs-panel group-tab" id="panel-6-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_add</span><span class="p">():</span>
    <span class="k">assert</span> <span class="n">add</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">)</span> <span class="o">==</span> <span class="mf">0.3</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-6-Ug==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-6-Ug==" name="Ug==" role="tabpanel" tabindex="0"><div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="n">add</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p">){</span>
<span class="w">    </span><span class="kr">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span>
<span class="p">}</span>

<span class="nf">test_that</span><span class="p">(</span><span class="s">&quot;Adding floats works&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>
<span class="w">    </span><span class="nf">expect_identical</span><span class="p">(</span><span class="nf">add</span><span class="p">(</span><span class="m">0.1</span><span class="p">,</span><span class="w"> </span><span class="m">0.2</span><span class="p">),</span><span class="m">0.3</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-6-SnVsaWE=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-6-SnVsaWE=" name="SnVsaWE=" role="tabpanel" tabindex="0"><div class="highlight-Julia notranslate"><div class="highlight"><pre><span></span><span class="k">function</span><span class="w"> </span><span class="n">myadd</span><span class="p">(</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">)</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span>
<span class="w"> </span><span class="k">end</span>

<span class="k">using</span><span class="w"> </span><span class="n">Test</span>
<span class="nd">@testset</span><span class="w"> </span><span class="s">&quot;myadd&quot;</span><span class="w"> </span><span class="k">begin</span>
<span class="w">    </span><span class="nd">@test</span><span class="w"> </span><span class="n">myadd</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="w"> </span><span class="mf">0.2</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">0.3</span>
<span class="k">end</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-6-Qysr" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-6-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-7-Q2F0Y2gy" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-7-Q2F0Y2gy" name="Q2F0Y2gy" role="tab" tabindex="0">Catch2</button><button aria-controls="panel-7-R29vZ2xlVGVzdA==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-7-R29vZ2xlVGVzdA==" name="R29vZ2xlVGVzdA==" role="tab" tabindex="-1">GoogleTest</button></div><div aria-labelledby="tab-7-Q2F0Y2gy" class="sphinx-tabs-panel group-tab" id="panel-7-Q2F0Y2gy" name="Q2F0Y2gy" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;catch2/catch_test_macros.hpp&gt;</span>

<span class="w">  </span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Number</span><span class="o">&gt;</span>
<span class="w">  </span><span class="n">Number</span>
<span class="w">  </span><span class="n">add</span><span class="p">(</span><span class="n">Number</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">Number</span><span class="w"> </span><span class="n">b</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span><span class="w">    </span>
<span class="w">  </span>
<span class="w">  </span><span class="n">TEST_CASE</span><span class="p">(</span><span class="s">&quot;AddTests&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;DoubleTest&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">      </span><span class="n">REQUIRE</span><span class="p">(</span><span class="n">add</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.2</span><span class="p">)</span><span class="o">==</span><span class="mf">0.3</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-7-R29vZ2xlVGVzdA==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-7-R29vZ2xlVGVzdA==" name="R29vZ2xlVGVzdA==" role="tabpanel" tabindex="0"><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;gtest/gtest.h&gt;</span>

<span class="w">  </span><span class="k">template</span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">Number</span><span class="o">&gt;</span>
<span class="w">  </span><span class="n">Number</span>
<span class="w">  </span><span class="n">add</span><span class="p">(</span><span class="n">Number</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">Number</span><span class="w"> </span><span class="n">b</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span><span class="w">    </span>
<span class="w">  </span>
<span class="w">  </span><span class="n">TEST</span><span class="p">(</span><span class="n">AddTests</span><span class="p">,</span><span class="w"> </span><span class="n">DoubleTest</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">      </span><span class="n">ASSERT_EQ</span><span class="p">(</span><span class="n">add</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.2</span><span class="p">),</span><span class="mf">0.3</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
</div></div>
</div></div>
<p>Your goal: find a more robust way to test this addition.</p>
</div>
<p><a class="reference external" href="../locally/#solution-0">In locally.md:</a></p>
<div class="admonition-solution-local-2 solution important dropdown admonition" id="solution-0">
<p class="admonition-title">Solution: Local-2</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-8-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-8-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-8-Ug==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-8-Ug==" name="Ug==" role="tab" tabindex="-1">R</button><button aria-controls="panel-8-SnVsaWE=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-8-SnVsaWE=" name="SnVsaWE=" role="tab" tabindex="-1">Julia</button><button aria-controls="panel-8-Qysr" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-8-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button></div><div aria-labelledby="tab-8-UHl0aG9u" class="sphinx-tabs-panel group-tab" id="panel-8-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><p>One solution is to use
<a class="reference external" href="https://docs.pytest.org/en/4.6.x/reference.html#pytest-approx">pytest.approx</a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">pytest</span><span class="w"> </span><span class="kn">import</span> <span class="n">approx</span>

<span class="k">def</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">+</span> <span class="n">b</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_add</span><span class="p">():</span>
    <span class="k">assert</span> <span class="n">add</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">)</span> <span class="o">==</span> <span class="n">approx</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
</pre></div>
</div>
<p>But maybe you didn’t know about
<a class="reference external" href="https://docs.pytest.org/en/4.6.x/reference.html#pytest-approx">pytest.approx</a>:
and did this instead:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">test_add</span><span class="p">():</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">add</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">)</span>
    <span class="k">assert</span> <span class="nb">abs</span><span class="p">(</span><span class="n">result</span> <span class="o">-</span> <span class="mf">0.3</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1.0e-7</span>
</pre></div>
</div>
<p>This is OK but the <code class="docutils literal notranslate"><span class="pre">1.0e-7</span></code> can be a bit arbitrary.</p>
</div><div aria-labelledby="tab-8-Ug==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-8-Ug==" name="Ug==" role="tabpanel" tabindex="0"><p>One solution is to use
<a class="reference external" href="https://testthat.r-lib.org/reference/equality-expectations.html">expect_equal</a> which allows for roundoff errors:</p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="nf">test_that</span><span class="p">(</span><span class="s">&quot;Adding floats works with equal&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">res</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="m">0.1</span><span class="p">,</span><span class="w"> </span><span class="m">0.2</span><span class="p">)</span>
<span class="w">    </span><span class="nf">expect_equal</span><span class="p">(</span><span class="n">res</span><span class="p">,</span><span class="m">0.3</span><span class="p">)</span>
<span class="w">    </span><span class="nf">expect_true</span><span class="p">(</span><span class="nf">is.numeric</span><span class="p">(</span><span class="n">res</span><span class="p">))</span>
<span class="p">})</span>
</pre></div>
</div>
<p>But maybe you didn’t know about it and used the ‘less than’ comparison of <a class="reference external" href="https://testthat.r-lib.org/reference/comparison-expectations.html">expect_lt</a> instead:</p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="nf">test_that</span><span class="p">(</span><span class="s">&quot;Adding floats works with lt&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">res</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">add</span><span class="p">(</span><span class="m">0.1</span><span class="p">,</span><span class="w"> </span><span class="m">0.2</span><span class="p">)</span>
<span class="w">    </span><span class="nf">expect_lt</span><span class="p">(</span><span class="nf">abs</span><span class="p">(</span><span class="n">res</span><span class="m">-0.3</span><span class="p">),</span><span class="m">1.0e-7</span><span class="p">)</span>
<span class="w">    </span><span class="nf">expect_true</span><span class="p">(</span><span class="nf">is.numeric</span><span class="p">(</span><span class="n">res</span><span class="p">))</span>
<span class="p">})</span>
</pre></div>
</div>
<p>This is OK but the <code class="docutils literal notranslate"><span class="pre">1.0e-7</span></code> can be a bit arbitrary.</p>
</div><div aria-labelledby="tab-8-SnVsaWE=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-8-SnVsaWE=" name="SnVsaWE=" role="tabpanel" tabindex="0"><p>One solution is to use <code class="docutils literal notranslate"><span class="pre">\approx</span></code>:</p>
<div class="highlight-Julia notranslate"><div class="highlight"><pre><span></span><span class="nd">@testset</span><span class="w"> </span><span class="s">&quot;Add floats with approx&quot;</span><span class="w"> </span><span class="k">begin</span>
<span class="w">    </span><span class="nd">@test</span><span class="w"> </span><span class="n">myadd</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.2</span><span class="p">)</span><span class="w"> </span><span class="o">≈</span><span class="w"> </span><span class="mf">0.3</span>
<span class="w">    </span><span class="c">#Variant with specifying a tolerance</span>
<span class="w">    </span><span class="nd">@test</span><span class="w"> </span><span class="n">myadd</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.2</span><span class="p">)</span><span class="w"> </span><span class="o">≈</span><span class="w"> </span><span class="mf">0.3</span><span class="w"> </span><span class="n">atol</span><span class="o">=</span><span class="mf">1.0e-7</span>
<span class="k">end</span>
</pre></div>
</div>
<p>But maybe you didn’t know about <code class="docutils literal notranslate"><span class="pre">\approx</span></code>
and did this instead:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>    <span class="nd">@test</span> <span class="nb">abs</span><span class="p">(</span><span class="n">myadd</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.2</span><span class="p">)</span><span class="o">-</span><span class="mf">0.3</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mf">1.0e-7</span>
</pre></div>
</div>
<p>This is OK but the <code class="docutils literal notranslate"><span class="pre">1.0e-7</span></code> can be a bit arbitrary.</p>
</div><div aria-labelledby="tab-8-Qysr" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-8-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-9-Q2F0Y2gy" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-9-Q2F0Y2gy" name="Q2F0Y2gy" role="tab" tabindex="0">Catch2</button><button aria-controls="panel-9-R29vZ2xlVGVzdA==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-9-R29vZ2xlVGVzdA==" name="R29vZ2xlVGVzdA==" role="tab" tabindex="-1">GoogleTest</button></div><div aria-labelledby="tab-9-Q2F0Y2gy" class="sphinx-tabs-panel group-tab" id="panel-9-Q2F0Y2gy" name="Q2F0Y2gy" role="tabpanel" tabindex="0"><p>Catch2 offers a very sophisticated way to test equality of two floating point numbers based on ‘units in the last place (ULP)’.
Matching the settings of GoogleTest we consider decimals equals to within <code class="docutils literal notranslate"><span class="pre">4</span></code> ULP.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;catch2/matchers/catch_matchers_floating_point.hpp&gt;</span>
<span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="n">Catch</span><span class="o">::</span><span class="n">Matchers</span><span class="o">::</span><span class="n">WithinULP</span><span class="p">;</span>
<span class="w">  </span><span class="n">TEST_CASE</span><span class="p">(</span><span class="s">&quot;DoubleTest&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;[add]&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="n">REQUIRE_THAT</span><span class="p">(</span><span class="n">add</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.2</span><span class="p">),</span><span class="n">WithinULP</span><span class="p">(</span><span class="mf">0.3</span><span class="p">,</span><span class="mi">4</span><span class="p">));</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
<p>But maybe you didn’t know about
<a class="reference external" href="https://github.com/catchorg/Catch2/blob/devel/docs/comparing-floating-point-numbers.md#top">Catch2 floating point matchers</a>
and did this instead:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;cmath&gt;</span>
<span class="w">  </span><span class="n">TEST_CASE</span><span class="p">(</span><span class="s">&quot;DoubleTest&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;[add]&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="n">REQUIRE</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">abs</span><span class="p">(</span><span class="n">add</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.2</span><span class="p">)</span><span class="mf">-0.3</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">1.0e-7</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
<p>This is OK but the <code class="docutils literal notranslate"><span class="pre">1.0e-7</span></code> can be a bit arbitrary. The first option is certainly more robust and recommended in the C++ case.</p>
</div><div aria-labelledby="tab-9-R29vZ2xlVGVzdA==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-9-R29vZ2xlVGVzdA==" name="R29vZ2xlVGVzdA==" role="tabpanel" tabindex="0"><p>GoogleTest offers a very sophisticated way to test equality of two double numbers based on ‘units in the last place (ULP)’,
see <a class="reference external" href="http://google.github.io/googletest/reference/assertions.html#floating-point">the documentation</a> for more details.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="n">TEST</span><span class="p">(</span><span class="n">AddTests</span><span class="p">,</span><span class="w"> </span><span class="n">DoubleTest</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="n">ASSERT_DOUBLE_EQ</span><span class="p">(</span><span class="n">add</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.2</span><span class="p">),</span><span class="mf">0.3</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
<p>But maybe you found the ‘less than’ assertion first and did this instead:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="w">  </span><span class="cp">#include</span><span class="cpf">&lt;cmath&gt;</span>
<span class="w">  </span><span class="n">TEST</span><span class="p">(</span><span class="n">AddTests</span><span class="p">,</span><span class="w"> </span><span class="n">DoubleTest</span><span class="p">)</span>
<span class="w">  </span><span class="p">{</span>
<span class="w">    </span><span class="c1">//assert that add(0.1,0.2)-0.3 &lt; 1.0e-7 holds</span>
<span class="w">    </span><span class="n">ASSERT_LT</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">abs</span><span class="p">(</span><span class="n">add</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.2</span><span class="p">)</span><span class="mf">-0.3</span><span class="p">),</span><span class="mf">1.0e-7</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
</pre></div>
</div>
<p>This is OK but the <code class="docutils literal notranslate"><span class="pre">1.0e-7</span></code> can be a bit arbitrary. The first option is certainly more robust and recommended in the C++ case.</p>
</div></div>
</div></div>
</div>
</section>
<section id="automated-testing">
<h3>Automated testing<a class="headerlink" href="#automated-testing" title="Link to this heading"></a></h3>
<p><a class="reference external" href="../continuous-integration/#exercise-0">In continuous-integration.md:</a></p>
<div class="admonition-exercise-ci-1-create-and-use-a-continuous-integration-workflow-on-github-or-gitlab exercise important admonition" id="exercise-0">
<p class="admonition-title">Exercise CI-1: Create and use a continuous integration workflow on GitHub or GitLab</p>
<p>In this exercise, we will:</p>
<ul class="simple">
<li><p><strong>A.</strong> Create and add code to a repository on GitHub/GitLab (or, alternatively, fork and clone an existing example repository)</p></li>
<li><p><strong>B.</strong> Set up tests with GitHub Actions/ GitLab CI</p></li>
<li><p><strong>C.</strong> Find a bug in our repository and open an issue to report it</p></li>
<li><p><strong>D.</strong> Fix the bug on a bugfix branch and open a pull request (GitHub)/ merge request (GitLab)</p></li>
<li><p><strong>E.</strong> Merge the pull/merge request and see how the issue is automatically closed.</p></li>
<li><p><strong>F.</strong> Create a test to increase the code coverage of our tests.</p></li>
</ul>
</div>
</section>
<section id="test-design">
<h3>Test design<a class="headerlink" href="#test-design" title="Link to this heading"></a></h3>
<p><a class="reference external" href="../test-design/#exercise-0">In test-design.md:</a></p>
<div class="admonition-design-1-design-a-test-for-a-function-that-receives-a-number-and-returns-a-number exercise important admonition" id="exercise-0">
<p class="admonition-title">Design-1: Design a test for a function that receives a number and returns a number</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-1-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-1-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-1-Qysr" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-1-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button><button aria-controls="panel-1-Ug==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-1-Ug==" name="Ug==" role="tab" tabindex="-1">R</button><button aria-controls="panel-1-SnVsaWE=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-1-SnVsaWE=" name="SnVsaWE=" role="tab" tabindex="-1">Julia</button><button aria-controls="panel-1-Rm9ydHJhbg==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-1-Rm9ydHJhbg==" name="Rm9ydHJhbg==" role="tab" tabindex="-1">Fortran</button></div><div aria-labelledby="tab-1-UHl0aG9u" class="sphinx-tabs-panel group-tab" id="panel-1-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">factorial</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Computes the factorial of n.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">n</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s1">&#39;received negative input&#39;</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">result</span> <span class="o">*=</span> <span class="n">i</span>
    <span class="k">return</span> <span class="n">result</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-1-Qysr" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-1-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-C++ notranslate"><div class="highlight"><pre><span></span><span class="cm">/* Computes the factorial of n recursively. */</span>
<span class="k">constexpr</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="nf">factorial</span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">   </span><span class="k">return</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">factorial</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">1</span><span class="p">));</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-1-Ug==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-1-Ug==" name="Ug==" role="tabpanel" tabindex="0"><div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="c1">#&#39; Computes the factorial of n</span>
<span class="c1">#&#39;</span>
<span class="c1">#&#39; @param n The number to compute the factorial of.</span>
<span class="c1">#&#39; @return The factorial of n</span>
<span class="n">factorial</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
<span class="w">    </span><span class="nf">stop</span><span class="p">(</span><span class="s">&#39;received negative input&#39;</span><span class="p">)</span>
<span class="w">  </span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
<span class="w">    </span><span class="kr">return</span><span class="p">(</span><span class="m">1</span><span class="p">)</span>

<span class="w">  </span><span class="n">result</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">1</span>
<span class="w">  </span><span class="kr">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="n">n</span><span class="p">)</span>
<span class="w">    </span><span class="n">result</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">i</span>
<span class="w">  </span><span class="n">result</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-1-SnVsaWE=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-1-SnVsaWE=" name="SnVsaWE=" role="tabpanel" tabindex="0"><div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    factorial(n::Int)</span>

<span class="s">Compute the factorial of n.</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="k">function</span><span class="w"> </span><span class="n">factorial</span><span class="p">(</span><span class="n">n</span><span class="o">::</span><span class="kt">Int</span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="n">throw</span><span class="p">(</span><span class="kt">DomainError</span><span class="p">(</span><span class="s">&quot;n must be non-negative&quot;</span><span class="p">))</span>
<span class="w">    </span><span class="k">end</span>
<span class="w">    </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="n">n</span>
<span class="w">        </span><span class="n">result</span><span class="w"> </span><span class="o">*=</span><span class="w"> </span><span class="n">i</span>
<span class="w">    </span><span class="k">end</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">result</span>
<span class="k">end</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-1-Rm9ydHJhbg==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-1-Rm9ydHJhbg==" name="Rm9ydHJhbg==" role="tabpanel" tabindex="0"><div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">module </span><span class="n">factorial_mod</span>
<span class="k">contains</span>
<span class="w">   </span><span class="c">! computes the factorial of n</span>
<span class="w">   </span><span class="kt">integer </span><span class="k">function </span><span class="n">factorial</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="w">      </span><span class="k">implicit none</span>
<span class="k">      </span><span class="kt">integer</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">n</span>
<span class="w">      </span><span class="kt">integer </span><span class="n">r</span>
<span class="w">      </span><span class="kt">integer </span><span class="n">i</span>
<span class="w">      </span><span class="k">if</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="k">then</span>
<span class="k">         write</span><span class="p">(</span><span class="o">*</span><span class="p">,</span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="s1">&#39;Received negative input&#39;</span>
<span class="w">         </span><span class="k">stop</span>
<span class="k">      end if</span>
<span class="k">      </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span>
<span class="w">      </span><span class="k">do </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="n">n</span>
<span class="w">         </span><span class="n">r</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">r</span><span class="o">*</span><span class="n">i</span>
<span class="w">      </span><span class="k">end do</span>
<span class="k">      </span><span class="n">factorial</span><span class="o">=</span><span class="n">r</span>
<span class="w">   </span><span class="k">end function </span><span class="n">factorial</span>
<span class="k">end module </span><span class="n">factorial_mod</span>
</pre></div>
</div>
</div><p>Discussion point: The factorial grows very rapidly. What happens if you
pass a large number as argument to the function?</p>
</div>
<div class="admonition-solution solution important dropdown admonition" id="solution-0">
<p class="admonition-title">Solution</p>
<p>This is a <strong>pure function</strong> so is easy to test: inputs go to
outputs.  For example, start with the below, then think of some
what extreme cases/boundary cases there might be.  This example shows
all of the tests as one function, but you might want to make each test
function more fine-grained and test only one concept.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-2-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-2-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-2-Qysr" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-2-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button><button aria-controls="panel-2-Ug==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-2-Ug==" name="Ug==" role="tab" tabindex="-1">R</button><button aria-controls="panel-2-SnVsaWE=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-2-SnVsaWE=" name="SnVsaWE=" role="tab" tabindex="-1">Julia</button><button aria-controls="panel-2-Rm9ydHJhbg==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-2-Rm9ydHJhbg==" name="Rm9ydHJhbg==" role="tab" tabindex="-1">Fortran</button></div><div aria-labelledby="tab-2-UHl0aG9u" class="sphinx-tabs-panel group-tab" id="panel-2-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pytest</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_factorial</span><span class="p">():</span>
    <span class="k">assert</span> <span class="n">factorial</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="n">factorial</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="n">factorial</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
       
</pre></div>
</div>
</div><div aria-labelledby="tab-2-Qysr" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-2-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;catch2/catch.hpp&gt;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;factorial.hpp&quot;</span>

<span class="n">TEST_CASE</span><span class="p">(</span><span class="s">&quot;Compute the factorial&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;[factorial]&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">REQUIRE</span><span class="p">(</span><span class="n">factorial</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="w">  </span><span class="n">REQUIRE</span><span class="p">(</span><span class="n">factorial</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="w">  </span><span class="n">REQUIRE</span><span class="p">(</span><span class="n">factorial</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<span class="w">  </span><span class="n">REQUIRE</span><span class="p">(</span><span class="n">factorial</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">6</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-2-Ug==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-2-Ug==" name="Ug==" role="tabpanel" tabindex="0"><div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="nf">test_that</span><span class="p">(</span><span class="s">&quot;Test factorial&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nf">expect_equal</span><span class="p">(</span><span class="nf">factorial</span><span class="p">(</span><span class="m">0</span><span class="p">),</span><span class="w"> </span><span class="m">1</span><span class="p">)</span>
<span class="w">  </span><span class="nf">expect_equal</span><span class="p">(</span><span class="nf">factorial</span><span class="p">(</span><span class="m">1</span><span class="p">),</span><span class="w"> </span><span class="m">1</span><span class="p">)</span>
<span class="w">  </span><span class="nf">expect_equal</span><span class="p">(</span><span class="nf">factorial</span><span class="p">(</span><span class="m">2</span><span class="p">),</span><span class="w"> </span><span class="m">2</span><span class="p">)</span>
<span class="w">  </span><span class="nf">expect_equal</span><span class="p">(</span><span class="nf">factorial</span><span class="p">(</span><span class="m">3</span><span class="p">),</span><span class="w"> </span><span class="m">6</span><span class="p">)</span>
<span class="w">  </span><span class="c1"># also try negatives (check that it raises an error), non-integers, etc.</span>

<span class="w">  </span><span class="c1"># Raise an error if factorial does *not* raise an error:</span>
<span class="w">  </span><span class="nf">expect_error</span><span class="p">(</span><span class="nf">factorial</span><span class="p">(</span><span class="m">-1</span><span class="p">))</span>
<span class="p">})</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-2-SnVsaWE=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-2-SnVsaWE=" name="SnVsaWE=" role="tabpanel" tabindex="0"><div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="nd">@testset</span><span class="w"> </span><span class="s">&quot;Test factorial function&quot;</span><span class="w"> </span><span class="k">begin</span>
<span class="w">    </span><span class="nd">@test_throws</span><span class="w"> </span><span class="kt">DomainError</span><span class="w"> </span><span class="n">factorial</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@test</span><span class="w"> </span><span class="n">factorial</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">6</span>
<span class="k">end</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-2-Rm9ydHJhbg==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-2-Rm9ydHJhbg==" name="Rm9ydHJhbg==" role="tabpanel" tabindex="0"><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@test</span>
<span class="n">subroutine</span> <span class="n">test_factorial</span><span class="p">()</span>
   <span class="n">use</span> <span class="n">factorial_mod</span>
   <span class="n">use</span> <span class="n">funit</span>
   <span class="nd">@assertEqual</span><span class="p">(</span><span class="mi">120</span><span class="p">,</span> <span class="n">factorial</span><span class="p">(</span><span class="mi">5</span><span class="p">),</span> <span class="s1">&#39;factorial(5)&#39;</span><span class="p">)</span>
<span class="n">end</span> <span class="n">subroutine</span> <span class="n">test_factorial</span>
</pre></div>
</div>
</div></div>
<p>Notes on the discussion point: Programming languages differ in the way they deal with integer
overflow. Python automatically converts to the necessary <code class="docutils literal notranslate"><span class="pre">long</span></code> type, in Julia you would
observe a “wrap-around”, in C/C++ you get undefined behaviour for signed integers.
Testing for overflow likewise depends on the language.</p>
</div>
</div>
<p><a class="reference external" href="../test-design/#exercise-1">In test-design.md:</a></p>
<div class="admonition-design-2-design-a-test-for-a-function-that-receives-two-strings-and-returns-a-number exercise important admonition" id="exercise-1">
<p class="admonition-title">Design-2: Design a test for a function that receives two strings and returns a number</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-3-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-3-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-3-Qysr" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-3-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button><button aria-controls="panel-3-Ug==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-3-Ug==" name="Ug==" role="tab" tabindex="-1">R</button><button aria-controls="panel-3-SnVsaWE=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-3-SnVsaWE=" name="SnVsaWE=" role="tab" tabindex="-1">Julia</button><button aria-controls="panel-3-Rm9ydHJhbg==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-3-Rm9ydHJhbg==" name="Rm9ydHJhbg==" role="tab" tabindex="-1">Fortran</button></div><div aria-labelledby="tab-3-UHl0aG9u" class="sphinx-tabs-panel group-tab" id="panel-3-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">count_word_occurrence_in_string</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Counts how often word appears in text.</span>
<span class="sd">    Example: if text is &quot;one two one two three four&quot;</span>
<span class="sd">             and word is &quot;one&quot;, then this function returns 2</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">words</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">words</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-3-Qysr" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-3-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string&gt;</span>

<span class="cm">/* Counts how often word appears in text.</span>
<span class="cm"> * Example: if text is &quot;one two one two three four&quot;</span>
<span class="cm"> *          and word is &quot;one&quot;, then this function returns 2</span>
<span class="cm"> */</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">count_word_occurrence_in_string</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">text</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">word</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">word_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">ch</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">text</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ch</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">word</span><span class="p">[</span><span class="n">word_count</span><span class="p">])</span><span class="w"> </span><span class="o">++</span><span class="n">word_count</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">word</span><span class="p">[</span><span class="n">word_count</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="sc">&#39;\0&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">word_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">      </span><span class="o">++</span><span class="n">count</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">count</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-3-Ug==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-3-Ug==" name="Ug==" role="tabpanel" tabindex="0"><div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="c1">#&#39; Counts how often a given word appears in text</span>
<span class="c1">#&#39;</span>
<span class="c1">#&#39; @param text The text to search in.</span>
<span class="c1">#&#39; @param word The word to search for.</span>
<span class="c1">#&#39; @return The number of times the word occurs in the text.</span>
<span class="n">count_word_occurrence_in_string</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="n">text</span><span class="p">,</span><span class="w"> </span><span class="n">word</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">words</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">strsplit</span><span class="p">(</span><span class="n">text</span><span class="p">,</span><span class="w"> </span><span class="s">&#39; &#39;</span><span class="p">)[[</span><span class="m">1</span><span class="p">]]</span>
<span class="w">  </span><span class="nf">sum</span><span class="p">(</span><span class="n">words</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">word</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-3-SnVsaWE=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-3-SnVsaWE=" name="SnVsaWE=" role="tabpanel" tabindex="0"><div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    count_word_occurrence_in_string(text::String, word::String)</span>

<span class="s">Count how often word appears in text.</span>
<span class="s">Example: if `text` is &quot;one two one two three four&quot;</span>
<span class="s">and `word` is &quot;one&quot;, then this function returns 2</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="k">function</span><span class="w"> </span><span class="n">count_word_occurrence_in_string</span><span class="p">(</span><span class="n">text</span><span class="o">::</span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="n">word</span><span class="o">::</span><span class="kt">String</span><span class="p">)</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">count</span><span class="p">(</span><span class="n">word</span><span class="p">,</span><span class="w"> </span><span class="n">text</span><span class="p">)</span>

<span class="k">end</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-3-Rm9ydHJhbg==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-3-Rm9ydHJhbg==" name="Rm9ydHJhbg==" role="tabpanel" tabindex="0"><div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="c">! missing - please submit an example</span>
</pre></div>
</div>
</div></div>
<div class="admonition-solution solution important dropdown admonition" id="solution-1">
<p class="admonition-title">Solution</p>
<p>This is again a <strong>pure function</strong> but uses strings.  Use a similar strategy
to the above.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-4-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-4-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-4-Qysr" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-4-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button><button aria-controls="panel-4-Ug==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-4-Ug==" name="Ug==" role="tab" tabindex="-1">R</button><button aria-controls="panel-4-SnVsaWE=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-4-SnVsaWE=" name="SnVsaWE=" role="tab" tabindex="-1">Julia</button><button aria-controls="panel-4-Rm9ydHJhbg==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-4-Rm9ydHJhbg==" name="Rm9ydHJhbg==" role="tab" tabindex="-1">Fortran</button></div><div aria-labelledby="tab-4-UHl0aG9u" class="sphinx-tabs-panel group-tab" id="panel-4-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">test_count_word_occurrence_in_string</span><span class="p">():</span>
    <span class="k">assert</span> <span class="n">count_word_occurrence_in_string</span><span class="p">(</span><span class="s1">&#39;AAA BBB&#39;</span><span class="p">,</span> <span class="s1">&#39;AAA&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
    <span class="k">assert</span> <span class="n">count_word_occurrence_in_string</span><span class="p">(</span><span class="s1">&#39;AAA AAA&#39;</span><span class="p">,</span> <span class="s1">&#39;AAA&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span>
    <span class="c1"># What does this last test tell us?</span>
    <span class="k">assert</span> <span class="n">count_word_occurrence_in_string</span><span class="p">(</span><span class="s1">&#39;AAAAA&#39;</span><span class="p">,</span> <span class="s1">&#39;AAA&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-4-Qysr" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-4-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;catch2/catch.hpp&gt;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;word_count.hpp&quot;</span>

<span class="n">TEST_CASE</span><span class="p">(</span><span class="s">&quot;Count occurrences of substring in string&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;[count_word_occurrence_in_string]&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">REQUIRE</span><span class="p">(</span><span class="n">count_word_occurrence_in_string</span><span class="p">(</span><span class="s">&quot;AAA BBB&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AAA&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="w">  </span><span class="n">REQUIRE</span><span class="p">(</span><span class="n">count_word_occurrence_in_string</span><span class="p">(</span><span class="s">&quot;AAA AAA&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AAA&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<span class="w">  </span><span class="n">REQUIRE</span><span class="p">(</span><span class="n">count_word_occurrence_in_string</span><span class="p">(</span><span class="s">&quot;AAAA&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AAA&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-4-Ug==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-4-Ug==" name="Ug==" role="tabpanel" tabindex="0"><div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="nf">test_that</span><span class="p">(</span><span class="s">&quot;Test count word occurrence in string&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nf">expect_equal</span><span class="p">(</span><span class="nf">count_word_occurrence_in_string</span><span class="p">(</span><span class="s">&quot;AAA BBB&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AAA&quot;</span><span class="p">),</span><span class="w"> </span><span class="m">1</span><span class="p">)</span>
<span class="w">  </span><span class="nf">expect_equal</span><span class="p">(</span><span class="nf">count_word_occurrence_in_string</span><span class="p">(</span><span class="s">&quot;AAA AAA&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AAA&quot;</span><span class="p">),</span><span class="w"> </span><span class="m">2</span><span class="p">)</span>
<span class="w">  </span><span class="nf">expect_equal</span><span class="p">(</span><span class="nf">count_word_occurrence_in_string</span><span class="p">(</span><span class="s">&quot;AAAAA&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AAA&quot;</span><span class="p">),</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-4-SnVsaWE=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-4-SnVsaWE=" name="SnVsaWE=" role="tabpanel" tabindex="0"><div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="nd">@testset</span><span class="w"> </span><span class="s">&quot;Test count word occurrence in string&quot;</span><span class="w"> </span><span class="k">begin</span>
<span class="w">    </span><span class="nd">@test</span><span class="w"> </span><span class="n">count_word_occurrence_in_string</span><span class="p">(</span><span class="s">&quot;AAA BBB&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AAA&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="nd">@test</span><span class="w"> </span><span class="n">count_word_occurrence_in_string</span><span class="p">(</span><span class="s">&quot;AAA AAA&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AAA&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span>
<span class="w">    </span><span class="nd">@test</span><span class="w"> </span><span class="n">count_word_occurrence_in_string</span><span class="p">(</span><span class="s">&quot;AAAAA&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;AAA&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span>
<span class="k">end</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-4-Rm9ydHJhbg==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-4-Rm9ydHJhbg==" name="Rm9ydHJhbg==" role="tabpanel" tabindex="0"><div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="c">! missing - please submit an example</span>
</pre></div>
</div>
</div></div>
</div>
</div>
<p><a class="reference external" href="../test-design/#exercise-2">In test-design.md:</a></p>
<div class="admonition-design-3-design-a-test-for-a-function-which-reads-a-file-and-returns-a-number exercise important admonition" id="exercise-2">
<p class="admonition-title">Design-3: Design a test for a function which reads a file and returns a number</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-5-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-5-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-5-Qysr" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-5-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button><button aria-controls="panel-5-Ug==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-5-Ug==" name="Ug==" role="tab" tabindex="-1">R</button><button aria-controls="panel-5-SnVsaWE=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-5-SnVsaWE=" name="SnVsaWE=" role="tab" tabindex="-1">Julia</button><button aria-controls="panel-5-Rm9ydHJhbg==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-5-Rm9ydHJhbg==" name="Rm9ydHJhbg==" role="tab" tabindex="-1">Fortran</button></div><div aria-labelledby="tab-5-UHl0aG9u" class="sphinx-tabs-panel group-tab" id="panel-5-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">count_word_occurrence_in_file</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Counts how often word appears in file file_name.</span>
<span class="sd">    Example: if file contains &quot;one two one two three four&quot;</span>
<span class="sd">             and word is &quot;one&quot;, then this function returns 2</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">words</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
            <span class="n">count</span> <span class="o">+=</span> <span class="n">words</span><span class="o">.</span><span class="n">count</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">count</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-5-Qysr" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-5-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;fstream&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;streambuf&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string&gt;</span>

<span class="cm">/* Counts how often word appears in file fname.</span>
<span class="cm"> * Example: if file contains &quot;one two one two three four&quot;</span>
<span class="cm"> *          and word is &quot;one&quot;, then this function returns 2</span>
<span class="cm"> */</span>
<span class="kt">int</span><span class="w"> </span><span class="nf">count_word_occurrence_in_file</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">fname</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">word</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">ifstream</span><span class="w"> </span><span class="n">fh</span><span class="p">(</span><span class="n">fname</span><span class="p">);</span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">text</span><span class="p">((</span><span class="n">std</span><span class="o">::</span><span class="n">istreambuf_iterator</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span><span class="p">(</span><span class="n">fh</span><span class="p">)),</span>
<span class="w">		   </span><span class="n">std</span><span class="o">::</span><span class="n">istreambuf_iterator</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">&gt;</span><span class="p">());</span>

<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">word_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">0l</span><span class="n">u</span><span class="p">;</span><span class="w"> </span><span class="c1">// will be used for indexing and therefore it has to be *long unsigned* int for the safe conversion to &#39;std::__cxx11::basic_string&lt;char&gt;::size_type&#39;.</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>

<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="w"> </span><span class="n">ch</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">text</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">ch</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">word</span><span class="p">[</span><span class="n">word_count</span><span class="p">])</span><span class="w"> </span><span class="o">++</span><span class="n">word_count</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">word</span><span class="p">[</span><span class="n">word_count</span><span class="p">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="sc">&#39;\0&#39;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">word_count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">      </span><span class="o">++</span><span class="n">count</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">count</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-5-Ug==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-5-Ug==" name="Ug==" role="tabpanel" tabindex="0"><div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="c1">#&#39; Counts how often a given word appears in a file.</span>
<span class="c1">#&#39;</span>
<span class="c1">#&#39; @param file_name The name of the file to search in.</span>
<span class="c1">#&#39; @param word The word to search for in the file.</span>
<span class="c1">#&#39; @return The number of times the word appeared in the file.</span>
<span class="n">count_word_occurrence_in_file</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span><span class="w"> </span><span class="n">word</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">count</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">0</span>
<span class="w">  </span><span class="kr">for</span><span class="w"> </span><span class="p">(</span><span class="n">line</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="nf">readLines</span><span class="p">(</span><span class="n">file_name</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">words</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">strsplit</span><span class="p">(</span><span class="n">line</span><span class="p">,</span><span class="w"> </span><span class="s">&#39; &#39;</span><span class="p">)[[</span><span class="m">1</span><span class="p">]]</span>
<span class="w">    </span><span class="n">count</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">words</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">word</span><span class="p">)</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="n">count</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-5-SnVsaWE=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-5-SnVsaWE=" name="SnVsaWE=" role="tabpanel" tabindex="0"><div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="s">&quot;&quot;&quot;</span>
<span class="s">    count_word_occurrence_in_file(file_name::String, word::String)</span>

<span class="s">Counts how often word appears in file file_name.</span>
<span class="s">Example: if file contains &quot;one two one two three four&quot;</span>
<span class="s">         And word is &quot;one&quot;, then this function returns 2</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="k">function</span><span class="w"> </span><span class="n">count_word_occurrence_in_file</span><span class="p">(</span><span class="n">file_name</span><span class="o">::</span><span class="kt">String</span><span class="p">,</span><span class="w"> </span><span class="n">word</span><span class="o">::</span><span class="kt">String</span><span class="p">)</span>
<span class="w">    </span><span class="n">open</span><span class="p">(</span><span class="n">file_name</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;r&quot;</span><span class="p">)</span><span class="w"> </span><span class="k">do</span><span class="w"> </span><span class="n">file</span>
<span class="w">        </span><span class="n">lines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">readlines</span><span class="p">(</span><span class="n">file</span><span class="p">)</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">count</span><span class="p">(</span><span class="n">word</span><span class="p">,</span><span class="w"> </span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">))</span>
<span class="w">    </span><span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-5-Rm9ydHJhbg==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-5-Rm9ydHJhbg==" name="Rm9ydHJhbg==" role="tabpanel" tabindex="0"><div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="c">! missing - please submit an example</span>
</pre></div>
</div>
</div></div>
<div class="admonition-solution solution important dropdown admonition" id="solution-2">
<p class="admonition-title">Solution</p>
<p>In this example we test a function which is not pure, because the output
depends on the value of a file. We can generate a temporary file for testing
and remove it afterwards.  Even better could be to split file reading from the
calculation, so that testing the calculation part becomes easy (see above).</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-6-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-6-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-6-Qysr" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-6-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button><button aria-controls="panel-6-Ug==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-6-Ug==" name="Ug==" role="tab" tabindex="-1">R</button><button aria-controls="panel-6-SnVsaWE=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-6-SnVsaWE=" name="SnVsaWE=" role="tab" tabindex="-1">Julia</button><button aria-controls="panel-6-Rm9ydHJhbg==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-6-Rm9ydHJhbg==" name="Rm9ydHJhbg==" role="tab" tabindex="-1">Fortran</button></div><div aria-labelledby="tab-6-UHl0aG9u" class="sphinx-tabs-panel group-tab" id="panel-6-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">tempfile</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">os</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_count_word_occurrence_in_file</span><span class="p">():</span>
    <span class="n">_</span><span class="p">,</span> <span class="n">temporary_file_name</span> <span class="o">=</span> <span class="n">tempfile</span><span class="o">.</span><span class="n">mkstemp</span><span class="p">()</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">temporary_file_name</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s2">&quot;one two one two three four&quot;</span><span class="p">)</span>
    <span class="n">count</span> <span class="o">=</span> <span class="n">count_word_occurrence_in_file</span><span class="p">(</span><span class="n">temporary_file_name</span><span class="p">,</span> <span class="s2">&quot;one&quot;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">count</span> <span class="o">==</span> <span class="mi">2</span>
    <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">temporary_file_name</span><span class="p">)</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-6-Qysr" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-6-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;filesystem&gt;</span><span class="c1"> // for temp_directory_path(), requires C++17.</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;fstream&gt;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;catch2/catch.hpp&gt;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;word_count.hpp&quot;</span>

<span class="n">TEST_CASE</span><span class="p">(</span><span class="s">&quot;Count occurrences of substring in file&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;[count_word_occurrence_in_file]&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">namespace</span><span class="w"> </span><span class="nn">fs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nn">std</span><span class="o">::</span><span class="nn">filesystem</span><span class="p">;</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">tmp_dir</span><span class="p">{</span><span class="w"> </span><span class="n">fs</span><span class="o">::</span><span class="n">temp_directory_path</span><span class="p">()</span><span class="w"> </span><span class="p">};</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">fpath</span><span class="p">{</span><span class="w"> </span><span class="n">fs</span><span class="o">::</span><span class="n">temp_directory_path</span><span class="p">()</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="s">&quot;temp_file&quot;</span><span class="w"> </span><span class="p">};</span>

<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">ofstream</span><span class="w"> </span><span class="nf">s</span><span class="p">(</span><span class="n">fpath</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">ios</span><span class="o">::</span><span class="n">out</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">ios</span><span class="o">::</span><span class="n">trunc</span><span class="p">);</span>
<span class="w">  </span><span class="n">s</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;one two one two three four&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">  </span><span class="n">s</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>

<span class="w">  </span><span class="n">REQUIRE</span><span class="p">(</span><span class="n">count_word_occurrence_in_file</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;one&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span><span class="p">);</span>
<span class="w">  </span><span class="n">REQUIRE</span><span class="p">(</span><span class="n">count_word_occurrence_in_file</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;three&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="w">  </span><span class="n">REQUIRE</span><span class="p">(</span><span class="n">count_word_occurrence_in_file</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;six&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>

<span class="w">  </span><span class="n">fs</span><span class="o">::</span><span class="n">remove</span><span class="p">(</span><span class="w"> </span><span class="n">fpath</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-6-Ug==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-6-Ug==" name="Ug==" role="tabpanel" tabindex="0"><div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="nf">test_that</span><span class="p">(</span><span class="s">&quot;Test count word occurrence in file&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">fname</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">tempfile</span><span class="p">()</span>
<span class="w">  </span><span class="nf">write</span><span class="p">(</span><span class="s">&quot;one two one two three four&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">fname</span><span class="p">)</span>
<span class="w">  </span><span class="nf">expect_equal</span><span class="p">(</span><span class="nf">count_word_occurrence_in_file</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;one&quot;</span><span class="p">),</span><span class="w"> </span><span class="m">2</span><span class="p">)</span>
<span class="w">  </span><span class="nf">expect_equal</span><span class="p">(</span><span class="nf">count_word_occurrence_in_file</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;three&quot;</span><span class="p">),</span><span class="w"> </span><span class="m">1</span><span class="p">)</span>
<span class="w">  </span><span class="nf">expect_equal</span><span class="p">(</span><span class="nf">count_word_occurrence_in_file</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;six&quot;</span><span class="p">),</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
<span class="w">  </span><span class="nf">unlink</span><span class="p">(</span><span class="n">fname</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-6-SnVsaWE=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-6-SnVsaWE=" name="SnVsaWE=" role="tabpanel" tabindex="0"><div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="nd">@testset</span><span class="w"> </span><span class="s">&quot;Test count word occurrence in file&quot;</span><span class="w"> </span><span class="k">begin</span>
<span class="w">    </span><span class="n">msg</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;one two one two three four&quot;</span>
<span class="w">    </span><span class="p">(</span><span class="n">fname</span><span class="p">,</span><span class="w"> </span><span class="n">testio</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mktemp</span><span class="p">()</span>
<span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">testio</span><span class="p">,</span><span class="w"> </span><span class="n">msg</span><span class="p">)</span>
<span class="w">    </span><span class="n">close</span><span class="p">(</span><span class="n">testio</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@test</span><span class="w"> </span><span class="n">count_word_occurrence_in_file</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;one&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span>
<span class="w">    </span><span class="nd">@test</span><span class="w"> </span><span class="n">count_word_occurrence_in_file</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;three&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="nd">@test</span><span class="w"> </span><span class="n">count_word_occurrence_in_file</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;six&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span>
<span class="k">end</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-6-Rm9ydHJhbg==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-6-Rm9ydHJhbg==" name="Rm9ydHJhbg==" role="tabpanel" tabindex="0"><div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="c">! missing - please submit an example</span>
</pre></div>
</div>
</div></div>
</div>
</div>
<p><a class="reference external" href="../test-design/#exercise-3">In test-design.md:</a></p>
<div class="admonition-design-4-design-a-test-for-a-function-with-an-external-dependency exercise important admonition" id="exercise-3">
<p class="admonition-title">Design-4: Design a test for a function with an external dependency</p>
<p>This one is not easy to test because the function has an external dependency.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-7-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-7-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-7-Qysr" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-7-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button><button aria-controls="panel-7-Ug==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-7-Ug==" name="Ug==" role="tab" tabindex="-1">R</button><button aria-controls="panel-7-SnVsaWE=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-7-SnVsaWE=" name="SnVsaWE=" role="tab" tabindex="-1">Julia</button><button aria-controls="panel-7-Rm9ydHJhbg==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-7-Rm9ydHJhbg==" name="Rm9ydHJhbg==" role="tab" tabindex="-1">Fortran</button></div><div aria-labelledby="tab-7-UHl0aG9u" class="sphinx-tabs-panel group-tab" id="panel-7-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">check_reactor_temperature</span><span class="p">(</span><span class="n">temperature_celsius</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Checks whether temperature is above max_temperature</span>
<span class="sd">    and returns a status.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span><span class="w"> </span><span class="nn">reactor</span><span class="w"> </span><span class="kn">import</span> <span class="n">max_temperature</span>
    <span class="k">if</span> <span class="n">temperature_celsius</span> <span class="o">&gt;</span> <span class="n">max_temperature</span><span class="p">:</span>
        <span class="n">status</span> <span class="o">=</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">status</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">return</span> <span class="n">status</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-7-Qysr" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-7-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;constants.hpp&quot;</span>
<span class="cm">/* ^--- Defines the max_temperature constant as:</span>
<span class="cm">* namespace constants {</span>
<span class="cm">* constexpr double max_temperature = 100.0;</span>
<span class="cm">* }</span>
<span class="cm">*/</span>

<span class="k">enum</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">ReactorState</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">FINE</span><span class="p">,</span><span class="w"> </span><span class="n">CRITICAL</span><span class="w"> </span><span class="p">};</span>

<span class="cm">/* Checks whether temperature is above max_temperature and returns a status. */</span>
<span class="n">ReactorState</span><span class="w"> </span><span class="nf">check_reactor_temperature</span><span class="p">(</span><span class="kt">double</span><span class="w"> </span><span class="n">temperature_celsius</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">temperature_celsius</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">constants</span><span class="o">::</span><span class="n">max_temperature</span>
<span class="w">	     </span><span class="o">?</span><span class="w"> </span><span class="n">ReactorState</span><span class="o">::</span><span class="n">CRITICAL</span>
<span class="w">	     </span><span class="o">:</span><span class="w"> </span><span class="n">ReactorState</span><span class="o">::</span><span class="n">FINE</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-7-Ug==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-7-Ug==" name="Ug==" role="tabpanel" tabindex="0"><div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="c1"># reactor &lt;- namespace::makeNamespace(&quot;reactor&quot;)</span>
<span class="c1"># assign(&quot;max_temperature&quot;, 100, env = reactor)</span>
<span class="c1"># namespaceExport(reactor, &quot;max_temperature&quot;)</span>

<span class="c1">#&#39; Checks whether the temperature is above max_temperature</span>
<span class="c1">#&#39; and returns the status.</span>
<span class="c1">#&#39;</span>
<span class="c1">#&#39; @param temperature_celsius The temperature of the core</span>
<span class="c1">#&#39; @return 1 if the temperature is in range, otherwise 0</span>
<span class="n">check_reactor_temperature</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="n">temperature_celsius</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="n">temperature_celsius</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">reactor</span><span class="o">::</span><span class="n">max_temperature</span><span class="p">)</span>
<span class="w">    </span><span class="n">status</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">1</span>
<span class="w">  </span><span class="kr">else</span>
<span class="w">    </span><span class="n">status</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">0</span>
<span class="w">  </span><span class="n">status</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-7-SnVsaWE=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-7-SnVsaWE=" name="SnVsaWE=" role="tabpanel" tabindex="0"><div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="c"># Importing modules inside functions is not allowed in Julia and must be done at top-level</span>
<span class="k">using</span><span class="w"> </span><span class="n">reactor</span><span class="o">:</span><span class="w"> </span><span class="n">max_temperature</span>

<span class="s">&quot;&quot;&quot;</span>
<span class="s">    check_reactor_temperature(temperature_celsius)</span>

<span class="s">Checks whether temperature is above max_temperature</span>
<span class="s">and returns a status.</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="k">function</span><span class="w"> </span><span class="n">check_reactor_temperature</span><span class="p">(</span><span class="n">temperature_celsius</span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">temperature_celsius</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">max_temperature</span>
<span class="w">        </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">        </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-7-Rm9ydHJhbg==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-7-Rm9ydHJhbg==" name="Rm9ydHJhbg==" role="tabpanel" tabindex="0"><div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="c">! missing - please submit an example</span>
</pre></div>
</div>
</div></div>
<div class="admonition-solution solution important dropdown admonition" id="solution-3">
<p class="admonition-title">Solution</p>
<p>This function depends on the value of
<code class="docutils literal notranslate"><span class="pre">reactor.max_temperature</span></code> so the function is not pure, so testing gets
harder. You could use monkey patching to override the value of
<code class="docutils literal notranslate"><span class="pre">max_temperature</span></code>, and test it with different values.  <a class="reference external" href="https://en.wikipedia.org/wiki/Monkey_patch">Monkey
patching</a> is the concept
of artificially changing some other value.</p>
<p>A better solution would probably be to rewrite the function.</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-8-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-8-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-8-Qysr" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-8-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button><button aria-controls="panel-8-Ug==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-8-Ug==" name="Ug==" role="tab" tabindex="-1">R</button><button aria-controls="panel-8-SnVsaWE=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-8-SnVsaWE=" name="SnVsaWE=" role="tab" tabindex="-1">Julia</button><button aria-controls="panel-8-Rm9ydHJhbg==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-8-Rm9ydHJhbg==" name="Rm9ydHJhbg==" role="tab" tabindex="-1">Fortran</button></div><div aria-labelledby="tab-8-UHl0aG9u" class="sphinx-tabs-panel group-tab" id="panel-8-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">test_set_temp</span><span class="p">(</span><span class="n">monkeypatch</span><span class="p">):</span>
    <span class="n">monkeypatch</span><span class="o">.</span><span class="n">setattr</span><span class="p">(</span><span class="n">reactor</span><span class="p">,</span> <span class="s2">&quot;max_temperature&quot;</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">check_reactor_temperature</span><span class="p">(</span><span class="mi">99</span><span class="p">)</span>  <span class="o">==</span> <span class="mi">0</span>
    <span class="k">assert</span> <span class="n">check_reactor_temperature</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span>   <span class="c1"># boundary cases easily go wrong</span>
    <span class="k">assert</span> <span class="n">check_reactor_temperature</span><span class="p">(</span><span class="mi">101</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-8-Qysr" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-8-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Changing variables included from headers (monkey patching) is not possible in C++.</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;catch2/catch.hpp&gt;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;reactor.hpp&quot;</span>

<span class="n">TEST_CASE</span><span class="p">(</span><span class="s">&quot;Check reactor state&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;[reactor_state]&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">REQUIRE</span><span class="p">(</span><span class="n">check_reactor_temperature</span><span class="p">(</span><span class="mi">99</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">ReactorState</span><span class="o">::</span><span class="n">FINE</span><span class="p">);</span>
<span class="w">  </span><span class="n">REQUIRE</span><span class="p">(</span><span class="n">check_reactor_temperature</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">ReactorState</span><span class="o">::</span><span class="n">FINE</span><span class="p">);</span>
<span class="w">  </span><span class="n">REQUIRE</span><span class="p">(</span><span class="n">check_reactor_temperature</span><span class="p">(</span><span class="mi">101</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">ReactorState</span><span class="o">::</span><span class="n">CRITICAL</span><span class="p">);</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-8-Ug==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-8-Ug==" name="Ug==" role="tabpanel" tabindex="0"><div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="c1"># Changing variables imported from modules (monkey patching) is not possible in R.</span>
<span class="c1"># To be able to test this function properly it needs to be made pure:</span>
<span class="n">check_reactor_temperature</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="n">max_temperature</span><span class="p">,</span><span class="w"> </span><span class="n">temperature_celsius</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="n">temperature_celsius</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">max_temperature</span><span class="p">)</span>
<span class="w">    </span><span class="n">status</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">1</span>
<span class="w">  </span><span class="kr">else</span>
<span class="w">    </span><span class="n">status</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">0</span>
<span class="w">  </span><span class="n">status</span>
<span class="p">}</span>
<span class="nf">test_that</span><span class="p">(</span><span class="s">&quot;Test reactor temperature&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nf">expect_equal</span><span class="p">(</span><span class="nf">check_reactor_temperature</span><span class="p">(</span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="m">99</span><span class="p">),</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
<span class="w">  </span><span class="nf">expect_equal</span><span class="p">(</span><span class="nf">check_reactor_temperature</span><span class="p">(</span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="m">100</span><span class="p">),</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w">  </span><span class="c1"># boundary cases easily go wrong</span>
<span class="w">  </span><span class="nf">expect_equal</span><span class="p">(</span><span class="nf">check_reactor_temperature</span><span class="p">(</span><span class="m">100</span><span class="p">,</span><span class="w"> </span><span class="m">101</span><span class="p">),</span><span class="w"> </span><span class="m">1</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-8-SnVsaWE=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-8-SnVsaWE=" name="SnVsaWE=" role="tabpanel" tabindex="0"><div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="c"># Changing variables imported from modules (monkey patching) is not possible in Julia.</span>
<span class="c"># To be able to test this function properly it needs to be made pure:</span>

<span class="k">function</span><span class="w"> </span><span class="n">check_reactor_temperature</span><span class="p">(</span><span class="n">temperature_celsius</span><span class="p">,</span><span class="w"> </span><span class="n">max_temperature</span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">temperature_celsius</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">max_temperature</span>
<span class="w">        </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">        </span><span class="n">status</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="k">end</span>
<span class="k">end</span>

<span class="c"># normal invocation:</span>
<span class="k">using</span><span class="w"> </span><span class="n">reactor</span><span class="o">:</span><span class="w"> </span><span class="n">max_temperature</span>
<span class="n">check_reactor_temperature</span><span class="p">(</span><span class="mi">99</span><span class="p">,</span><span class="w"> </span><span class="n">max_temperature</span><span class="p">)</span>

<span class="c"># tests</span>
<span class="nd">@testset</span><span class="w"> </span><span class="s">&quot;Test check_reactor_temperature function&quot;</span><span class="w"> </span><span class="k">begin</span>
<span class="w">    </span><span class="nd">@test</span><span class="w"> </span><span class="n">check_reactor_temperature</span><span class="p">(</span><span class="mi">99</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="nd">@test</span><span class="w"> </span><span class="n">check_reactor_temperature</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w">   </span><span class="c"># boundary cases easily go wrong</span>
<span class="w">    </span><span class="nd">@test</span><span class="w"> </span><span class="n">check_reactor_temperature</span><span class="p">(</span><span class="mi">101</span><span class="p">,</span><span class="w"> </span><span class="mi">100</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span>
<span class="k">end</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-8-Rm9ydHJhbg==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-8-Rm9ydHJhbg==" name="Rm9ydHJhbg==" role="tabpanel" tabindex="0"><div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="c">! also here, not easy to test and better rewrite the function</span>
</pre></div>
</div>
</div></div>
</div>
</div>
<p><a class="reference external" href="../test-design/#exercise-4">In test-design.md:</a></p>
<div class="admonition-design-5-design-a-test-for-a-method-of-a-mutable-class exercise important admonition" id="exercise-4">
<p class="admonition-title">Design-5: Design a test for a method of a mutable class</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-9-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-9-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-9-Qysr" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-9-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button><button aria-controls="panel-9-Ug==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-9-Ug==" name="Ug==" role="tab" tabindex="-1">R</button><button aria-controls="panel-9-SnVsaWE=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-9-SnVsaWE=" name="SnVsaWE=" role="tab" tabindex="-1">Julia</button><button aria-controls="panel-9-Rm9ydHJhbg==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-9-Rm9ydHJhbg==" name="Rm9ydHJhbg==" role="tab" tabindex="-1">Fortran</button></div><div aria-labelledby="tab-9-UHl0aG9u" class="sphinx-tabs-panel group-tab" id="panel-9-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">class</span><span class="w"> </span><span class="nc">Pet</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="n">name</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hunger</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">go_for_a_walk</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>  <span class="c1"># &lt;-- how would you test this function?</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hunger</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-9-Qysr" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-9-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string&gt;</span>

<span class="k">class</span><span class="w"> </span><span class="nc">Pet</span><span class="w"> </span><span class="p">{</span>
<span class="w"> </span><span class="k">private</span><span class="o">:</span>
<span class="w">  </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">hunger_</span><span class="p">{</span><span class="mi">0</span><span class="p">};</span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">name_</span><span class="p">{};</span>

<span class="w"> </span><span class="k">public</span><span class="o">:</span>
<span class="w">  </span><span class="k">explicit</span><span class="w"> </span><span class="n">Pet</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">name_</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="n">go_for_a_walk</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">hunger_</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="w">  </span><span class="c1">// ^-- how would you test this function?</span>
<span class="w">  </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">hunger</span><span class="p">()</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">hunger_</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-9-Ug==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-9-Ug==" name="Ug==" role="tabpanel" tabindex="0"><div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="n">Pet</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nf">structure</span><span class="p">(</span>
<span class="w">    </span><span class="nf">list</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">hunger</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">),</span>
<span class="w">    </span><span class="n">class</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Pet&quot;</span>
<span class="w">  </span><span class="p">)</span>
<span class="p">}</span>

<span class="c1"># How would you test this function?</span>
<span class="n">take_for_a_walk</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="n">pet</span><span class="p">)</span><span class="w"> </span><span class="nf">UseMethod</span><span class="p">(</span><span class="s">&quot;take_for_a_walk&quot;</span><span class="p">)</span>
<span class="n">take_for_a_walk.Pet</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="n">pet</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">pet</span><span class="o">$</span><span class="n">hunger</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">pet</span><span class="o">$</span><span class="n">hunger</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="m">1</span>
<span class="w">  </span><span class="n">pet</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-9-SnVsaWE=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-9-SnVsaWE=" name="SnVsaWE=" role="tabpanel" tabindex="0"><div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="c"># the closest thing to a class in Julia is a `mutable struct`</span>
<span class="k">mutable</span><span class="w"> </span><span class="k">struct</span> <span class="kt">Pet</span>
<span class="w">    </span><span class="n">name</span><span class="o">::</span><span class="kt">String</span>
<span class="w">    </span><span class="n">hunger</span><span class="o">::</span><span class="kt">Int64</span>
<span class="k">end</span>

<span class="k">function</span><span class="w"> </span><span class="n">go_for_a_walk!</span><span class="p">(</span><span class="n">pet</span><span class="o">::</span><span class="kt">Pet</span><span class="p">)</span>
<span class="w">    </span><span class="n">pet</span><span class="o">.</span><span class="n">hunger</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span>
<span class="k">end</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-9-Rm9ydHJhbg==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-9-Rm9ydHJhbg==" name="Rm9ydHJhbg==" role="tabpanel" tabindex="0"><div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="c">! missing - please submit an example</span>
</pre></div>
</div>
</div></div>
<div class="admonition-solution solution important dropdown admonition" id="solution-4">
<p class="admonition-title">Solution</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-10-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-10-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-10-Qysr" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-10-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button><button aria-controls="panel-10-Ug==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-10-Ug==" name="Ug==" role="tab" tabindex="-1">R</button><button aria-controls="panel-10-SnVsaWE=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-10-SnVsaWE=" name="SnVsaWE=" role="tab" tabindex="-1">Julia</button><button aria-controls="panel-10-Rm9ydHJhbg==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-10-Rm9ydHJhbg==" name="Rm9ydHJhbg==" role="tab" tabindex="-1">Fortran</button></div><div aria-labelledby="tab-10-UHl0aG9u" class="sphinx-tabs-panel group-tab" id="panel-10-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">test_pet</span><span class="p">():</span>
    <span class="n">p</span> <span class="o">=</span> <span class="n">Pet</span><span class="p">(</span><span class="s1">&#39;fido&#39;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">p</span><span class="o">.</span><span class="n">hunger</span> <span class="o">==</span> <span class="mi">0</span>
    <span class="n">p</span><span class="o">.</span><span class="n">go_for_a_walk</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">p</span><span class="o">.</span><span class="n">hunger</span> <span class="o">==</span> <span class="mi">1</span>

    <span class="n">p</span><span class="o">.</span><span class="n">hunger</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
    <span class="n">p</span><span class="o">.</span><span class="n">go_for_a_walk</span><span class="p">()</span>
    <span class="k">assert</span> <span class="n">p</span><span class="o">.</span><span class="n">hunger</span> <span class="o">==</span> <span class="mi">0</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-10-Qysr" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-10-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;catch2/catch.hpp&gt;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;pet.hpp&quot;</span>

<span class="n">TEST_CASE</span><span class="p">(</span><span class="s">&quot;Check my pets&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;[pets]&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">fido</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Pet</span><span class="p">(</span><span class="s">&quot;fido&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="n">REQUIRE</span><span class="p">(</span><span class="n">fido</span><span class="p">.</span><span class="n">hunger</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>

<span class="w">  </span><span class="n">fido</span><span class="p">.</span><span class="n">go_for_a_walk</span><span class="p">();</span>
<span class="w">  </span><span class="n">REQUIRE</span><span class="p">(</span><span class="n">fido</span><span class="p">.</span><span class="n">hunger</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-10-Ug==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-10-Ug==" name="Ug==" role="tabpanel" tabindex="0"><div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="nf">test_that</span><span class="p">(</span><span class="s">&quot;Test Pet class&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">p</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">Pet</span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;fido&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="nf">expect_equal</span><span class="p">(</span><span class="n">p</span><span class="o">$</span><span class="n">hunger</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
<span class="w">  </span><span class="n">p</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">take_for_a_walk</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="w">  </span><span class="nf">expect_equal</span><span class="p">(</span><span class="n">p</span><span class="o">$</span><span class="n">hunger</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">)</span>

<span class="w">  </span><span class="n">p</span><span class="o">$</span><span class="n">hunger</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">-1</span>
<span class="w">  </span><span class="n">p</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">take_for_a_walk</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="w">  </span><span class="nf">expect_equal</span><span class="p">(</span><span class="n">p</span><span class="o">$</span><span class="n">hunger</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-10-SnVsaWE=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-10-SnVsaWE=" name="SnVsaWE=" role="tabpanel" tabindex="0"><div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="c"># create the mutable struct and test it</span>
<span class="nd">@testset</span><span class="w"> </span><span class="s">&quot;Test mutable struct&quot;</span><span class="w"> </span><span class="k">begin</span>
<span class="w">    </span><span class="n">p</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Pet</span><span class="p">(</span><span class="s">&quot;fido&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@test</span><span class="w"> </span><span class="n">p</span><span class="o">.</span><span class="n">hunger</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">go_for_a_walk!</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@test</span><span class="w"> </span><span class="n">p</span><span class="o">.</span><span class="n">hunger</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span>
<span class="w">    </span><span class="n">p</span><span class="o">.</span><span class="n">hunger</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span>
<span class="w">    </span><span class="n">go_for_a_walk!</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@test</span><span class="w"> </span><span class="n">p</span><span class="o">.</span><span class="n">hunger</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span>
<span class="k">end</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-10-Rm9ydHJhbg==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-10-Rm9ydHJhbg==" name="Rm9ydHJhbg==" role="tabpanel" tabindex="0"><div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="c">! missing - please submit an example</span>
</pre></div>
</div>
</div></div>
</div>
</div>
<p><a class="reference external" href="../test-design/#exercise-5">In test-design.md:</a></p>
<div class="admonition-design-6-experience-test-driven-development exercise important admonition" id="exercise-5">
<p class="admonition-title">Design-6: Experience test-driven development</p>
<p>Write a test before writing the function! You can decide yourself
what your unwritten function should do, but as a suggestion it can
be based on <a class="reference external" href="https://en.wikipedia.org/wiki/Fizz_buzz">FizzBuzz</a> - i.e.
a function that:</p>
<ul class="simple">
<li><p>takes an integer argument</p></li>
<li><p>for arguments that are multiples of three, returns “Fizz”</p></li>
<li><p>for arguments that are multiples of five, returns “Buzz”</p></li>
<li><p>for arguments that are multiples of both three and five, returns “FizzBuzz”</p></li>
<li><p>fails in case of non-integer arguments or integer arguments 0 or negative</p></li>
<li><p>otherwise returns the integer itself</p></li>
</ul>
<p>When writing the tests, consider the different ways that the function could
and should fail.</p>
<p>After you have written the tests, implement the function and run the tests
until they pass.</p>
<div class="admonition-solution solution important dropdown admonition" id="solution-5">
<p class="admonition-title">Solution</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-11-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-11-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-11-Qysr" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-11-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button><button aria-controls="panel-11-Ug==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-11-Ug==" name="Ug==" role="tab" tabindex="-1">R</button><button aria-controls="panel-11-SnVsaWE=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-11-SnVsaWE=" name="SnVsaWE=" role="tab" tabindex="-1">Julia</button><button aria-controls="panel-11-Rm9ydHJhbg==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-11-Rm9ydHJhbg==" name="Rm9ydHJhbg==" role="tab" tabindex="-1">Fortran</button></div><div aria-labelledby="tab-11-UHl0aG9u" class="sphinx-tabs-panel group-tab" id="panel-11-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pytest</span>

<span class="k">def</span><span class="w"> </span><span class="nf">fizzbuzz</span><span class="p">(</span><span class="n">number</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">number</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">TypeError</span>
    <span class="k">if</span> <span class="n">number</span> <span class="o">&lt;</span> <span class="mi">1</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span>
    <span class="k">elif</span> <span class="n">number</span> <span class="o">%</span> <span class="mi">15</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;FizzBuzz&quot;</span>
    <span class="k">elif</span> <span class="n">number</span> <span class="o">%</span> <span class="mi">3</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;Fizz&quot;</span>
    <span class="k">elif</span> <span class="n">number</span> <span class="o">%</span> <span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">return</span> <span class="s2">&quot;Buzz&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">number</span>

<span class="k">def</span><span class="w"> </span><span class="nf">test_fizzbuzz</span><span class="p">():</span>
    <span class="n">expected_result</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;Fizz&quot;</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;Buzz&quot;</span><span class="p">,</span> <span class="s2">&quot;Fizz&quot;</span><span class="p">,</span>
                       <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="s2">&quot;Fizz&quot;</span><span class="p">,</span> <span class="s2">&quot;Buzz&quot;</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="s2">&quot;Fizz&quot;</span><span class="p">,</span>
                       <span class="mi">13</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="s2">&quot;FizzBuzz&quot;</span><span class="p">,</span> <span class="mi">16</span><span class="p">,</span> <span class="mi">17</span><span class="p">,</span> <span class="s2">&quot;Fizz&quot;</span><span class="p">,</span> <span class="mi">19</span><span class="p">,</span> <span class="s2">&quot;Buzz&quot;</span><span class="p">]</span>
    <span class="n">obtained_result</span> <span class="o">=</span> <span class="p">[</span><span class="n">fizzbuzz</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">21</span><span class="p">)]</span>

    <span class="k">assert</span> <span class="n">obtained_result</span> <span class="o">==</span> <span class="n">expected_result</span>

    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
        <span class="n">fizzbuzz</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">ValueError</span><span class="p">):</span>
        <span class="n">fizzbuzz</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span>
        <span class="n">fizzbuzz</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)</span>
    <span class="k">with</span> <span class="n">pytest</span><span class="o">.</span><span class="n">raises</span><span class="p">(</span><span class="ne">TypeError</span><span class="p">):</span>
        <span class="n">fizzbuzz</span><span class="p">(</span><span class="s2">&quot;rabbit&quot;</span><span class="p">)</span>

<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">100</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">fizzbuzz</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">main</span><span class="p">()</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-11-Qysr" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-11-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// in the fizzbuzz.hpp header file</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string&gt;</span>

<span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="nf">fizzbuzz</span><span class="p">(</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">15</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;FizzBuzz&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;Fizz&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;Buzz&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">to_string</span><span class="p">(</span><span class="n">n</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// in the source file for the main executable</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;cstdlib&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">fizzbuzz</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="c1">// in the source file for the test</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string&gt;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;catch2/catch.hpp&gt;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;fizzbuzz.hpp&quot;</span>

<span class="n">TEST_CASE</span><span class="p">(</span><span class="s">&quot;FizzBuzz&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;[fizzbuzz]&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">expected</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&gt;</span><span class="p">{</span>
<span class="w">	</span><span class="s">&quot;1&quot;</span><span class="p">,</span><span class="w">        </span><span class="s">&quot;2&quot;</span><span class="p">,</span><span class="w">    </span><span class="s">&quot;Fizz&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;4&quot;</span><span class="p">,</span><span class="w">    </span><span class="s">&quot;Buzz&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Fizz&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;7&quot;</span><span class="p">,</span>
<span class="w">	</span><span class="s">&quot;8&quot;</span><span class="p">,</span><span class="w">        </span><span class="s">&quot;Fizz&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Buzz&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;11&quot;</span><span class="p">,</span><span class="w">   </span><span class="s">&quot;Fizz&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;13&quot;</span><span class="p">,</span><span class="w">   </span><span class="s">&quot;14&quot;</span><span class="p">,</span>
<span class="w">	</span><span class="s">&quot;FizzBuzz&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;16&quot;</span><span class="p">,</span><span class="w">   </span><span class="s">&quot;17&quot;</span><span class="p">,</span><span class="w">   </span><span class="s">&quot;Fizz&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;19&quot;</span><span class="p">,</span><span class="w">   </span><span class="s">&quot;Buzz&quot;</span><span class="p">};</span>

<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">21</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">REQUIRE</span><span class="p">(</span><span class="n">fizzbuzz</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">expected</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-11-Ug==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-11-Ug==" name="Ug==" role="tabpanel" tabindex="0"><div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="c1"># define the function</span>
<span class="n">fizz_buzz</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="n">number</span><span class="p">){</span>
<span class="w">  </span><span class="kr">if</span><span class="p">(</span><span class="o">!</span><span class="n">number</span><span class="o">%%</span><span class="m">1</span><span class="o">==</span><span class="m">0</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="nf">stop</span><span class="p">(</span><span class="s">&quot;non-integer or negative input not allowed!&quot;</span><span class="p">)</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="kr">if</span><span class="p">(</span><span class="n">number</span><span class="o">%%</span><span class="m">3</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">number</span><span class="o">%%</span><span class="m">5</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kr">return</span><span class="p">(</span><span class="s">&#39;FizzBuzz&#39;</span><span class="p">)</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="kr">else</span><span class="w"> </span><span class="kr">if</span><span class="p">(</span><span class="n">number</span><span class="o">%%</span><span class="m">3</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kr">return</span><span class="p">(</span><span class="s">&#39;Fizz&#39;</span><span class="p">)</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="kr">else</span><span class="w"> </span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="n">number</span><span class="o">%%</span><span class="m">5</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">){</span>
<span class="w">    </span><span class="kr">return</span><span class="p">(</span><span class="s">&#39;Buzz&#39;</span><span class="p">)</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="kr">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kr">return</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span>
<span class="p">}</span>

<span class="c1"># apply it to the numbers 1 to 50</span>
<span class="kr">for</span><span class="w"> </span><span class="p">(</span><span class="n">number</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">50</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nf">print</span><span class="p">(</span><span class="nf">fizz_buzz</span><span class="p">(</span><span class="n">number</span><span class="p">))</span>
<span class="p">}</span>


<span class="nf">library</span><span class="p">(</span><span class="n">testthat</span><span class="p">)</span>

<span class="nf">test_that</span><span class="p">(</span><span class="s">&quot;Test FizzBuzz&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nf">expect_equal</span><span class="p">(</span><span class="nf">fizz_buzz</span><span class="p">(</span><span class="m">1</span><span class="p">),</span><span class="w"> </span><span class="m">1</span><span class="p">)</span>
<span class="w">  </span><span class="nf">expect_equal</span><span class="p">(</span><span class="nf">fizz_buzz</span><span class="p">(</span><span class="m">2</span><span class="p">),</span><span class="w"> </span><span class="m">2</span><span class="p">)</span>
<span class="w">  </span><span class="nf">expect_equal</span><span class="p">(</span><span class="nf">fizz_buzz</span><span class="p">(</span><span class="m">3</span><span class="p">),</span><span class="w"> </span><span class="s">&#39;Fizz&#39;</span><span class="p">)</span>
<span class="w">  </span><span class="nf">expect_equal</span><span class="p">(</span><span class="nf">fizz_buzz</span><span class="p">(</span><span class="m">4</span><span class="p">),</span><span class="w"> </span><span class="m">4</span><span class="p">)</span>
<span class="w">  </span><span class="nf">expect_equal</span><span class="p">(</span><span class="nf">fizz_buzz</span><span class="p">(</span><span class="m">5</span><span class="p">),</span><span class="w"> </span><span class="s">&#39;Buzz&#39;</span><span class="p">)</span>
<span class="w">  </span><span class="nf">expect_equal</span><span class="p">(</span><span class="nf">fizz_buzz</span><span class="p">(</span><span class="m">15</span><span class="p">),</span><span class="w"> </span><span class="s">&#39;FizzBuzz&#39;</span><span class="p">)</span><span class="w">  </span>

<span class="w">  </span><span class="nf">expect_error</span><span class="p">(</span><span class="nf">fizz_buzz</span><span class="p">(</span><span class="m">-1</span><span class="p">))</span>
<span class="w">  </span><span class="nf">expect_error</span><span class="p">(</span><span class="nf">fizz_buzz</span><span class="p">(</span><span class="m">1.5</span><span class="p">))</span>
<span class="w">  </span><span class="nf">expect_error</span><span class="p">(</span><span class="nf">fizz_buzz</span><span class="p">(</span><span class="s">&#39;rabbit&#39;</span><span class="p">))</span><span class="w">    </span>
<span class="p">})</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-11-SnVsaWE=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-11-SnVsaWE=" name="SnVsaWE=" role="tabpanel" tabindex="0"><div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">using</span><span class="w"> </span><span class="n">Test</span>

<span class="k">function</span><span class="w"> </span><span class="n">fizzbuzz</span><span class="p">(</span><span class="n">number</span><span class="o">::</span><span class="kt">Int</span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="n">throw</span><span class="p">(</span><span class="kt">DomainError</span><span class="p">(</span><span class="n">number</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;number needs to be 1 or higher&quot;</span><span class="p">))</span>
<span class="w">    </span><span class="k">elseif</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">15</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;FizzBuzz&quot;</span>
<span class="w">    </span><span class="k">elseif</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;Fizz&quot;</span>
<span class="w">    </span><span class="k">elseif</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="s">&quot;Buzz&quot;</span>
<span class="w">    </span><span class="k">else</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">number</span>
<span class="w">    </span><span class="k">end</span>
<span class="k">end</span>

<span class="nd">@testset</span><span class="w"> </span><span class="k">begin</span>
<span class="w">    </span><span class="n">expected_result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Fizz&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Buzz&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Fizz&quot;</span><span class="p">,</span>
<span class="w">                       </span><span class="mi">7</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Fizz&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Buzz&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">11</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Fizz&quot;</span><span class="p">,</span>
<span class="w">                       </span><span class="mi">13</span><span class="p">,</span><span class="w"> </span><span class="mi">14</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;FizzBuzz&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">16</span><span class="p">,</span><span class="w"> </span><span class="mi">17</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Fizz&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">19</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Buzz&quot;</span><span class="p">]</span>
<span class="w">    </span><span class="n">obtained_result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">fizzbuzz</span><span class="p">(</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="mi">20</span><span class="p">]</span>

<span class="w">    </span><span class="nd">@test</span><span class="w"> </span><span class="n">obtained_result</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">expected_result</span>

<span class="w">    </span><span class="nd">@test_throws</span><span class="w"> </span><span class="kt">MethodError</span><span class="w"> </span><span class="n">fizzbuzz</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@test_throws</span><span class="w"> </span><span class="kt">DomainError</span><span class="w"> </span><span class="n">fizzbuzz</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@test_throws</span><span class="w"> </span><span class="kt">DomainError</span><span class="w"> </span><span class="n">fizzbuzz</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">)</span>

<span class="k">end</span>

<span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="mi">20</span>
<span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="n">fizzbuzz</span><span class="p">(</span><span class="n">i</span><span class="p">))</span>
<span class="k">end</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-11-Rm9ydHJhbg==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-11-Rm9ydHJhbg==" name="Rm9ydHJhbg==" role="tabpanel" tabindex="0"><div class="highlight-fortran notranslate"><div class="highlight"><pre><span></span><span class="k">module </span><span class="n">fizzbuzz_mod</span>
<span class="k">contains</span>
<span class="w">   </span><span class="c">! Evaluates the fizzbuzz of n</span>
<span class="w">   </span><span class="kt">character</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span><span class="w"> </span><span class="k">function </span><span class="n">fizzbuzz</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="w">      </span><span class="k">implicit none</span>
<span class="k">      </span><span class="kt">integer</span><span class="p">,</span><span class="w"> </span><span class="k">intent</span><span class="p">(</span><span class="n">in</span><span class="p">)</span><span class="w"> </span><span class="kd">::</span><span class="w"> </span><span class="n">n</span>
<span class="w">      </span><span class="kt">character</span><span class="p">(</span><span class="mi">8</span><span class="p">)</span><span class="w"> </span><span class="n">str1</span>
<span class="w">      </span><span class="k">if</span><span class="p">(</span><span class="w"> </span><span class="nb">mod</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="mi">15</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="k">then</span>
<span class="k">         </span><span class="n">str1</span><span class="o">=</span><span class="s1">&#39;FizzBuzz&#39;</span>
<span class="w">      </span><span class="k">else if</span><span class="p">(</span><span class="w"> </span><span class="nb">mod</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="mi">3</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="k">then</span>
<span class="k">         </span><span class="n">str1</span><span class="o">=</span><span class="s1">&#39;Fizz&#39;</span>
<span class="w">         </span><span class="n">str1</span><span class="o">=</span><span class="n">str1</span>
<span class="w">      </span><span class="k">else if</span><span class="p">(</span><span class="w"> </span><span class="nb">mod</span><span class="p">(</span><span class="n">n</span><span class="p">,</span><span class="mi">5</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="k">then</span>
<span class="k">         </span><span class="n">str1</span><span class="o">=</span><span class="s1">&#39;Buzz&#39;</span>
<span class="w">      </span><span class="k">else if</span><span class="p">(</span><span class="w"> </span><span class="n">n</span><span class="o">&lt;</span><span class="mi">0</span><span class="w"> </span><span class="p">)</span><span class="w"> </span><span class="k">then</span>
<span class="k">         </span><span class="n">str1</span><span class="o">=</span><span class="s1">&#39;Err n&lt;0&#39;</span>
<span class="w">      </span><span class="k">else</span>
<span class="k">         </span><span class="n">str1</span><span class="o">=</span><span class="nb">char</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="w">      </span><span class="k">end if</span>
<span class="k">      </span><span class="n">fizzbuzz</span><span class="o">=</span><span class="n">str1</span>
<span class="w">   </span><span class="k">end function </span><span class="n">fizzbuzz</span>
<span class="k">end module </span><span class="n">fizzbuzz_mod</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="nd">@test</span>
<span class="n">subroutine</span> <span class="n">test_fizzbuzz</span><span class="p">()</span>
   <span class="n">use</span> <span class="n">fizzbuzz_mod</span>
   <span class="n">use</span> <span class="n">funit</span>
   <span class="nd">@assertEqual</span><span class="p">(</span><span class="s1">&#39;Fizz&#39;</span><span class="p">,</span> <span class="n">fizzbuzz</span><span class="p">(</span><span class="mi">12</span><span class="p">),</span> <span class="s1">&#39;fizzbuzz(12)&#39;</span><span class="p">)</span>
   <span class="nd">@assertEqual</span><span class="p">(</span><span class="s1">&#39;Buzz&#39;</span><span class="p">,</span> <span class="n">fizzbuzz</span><span class="p">(</span><span class="mi">25</span><span class="p">),</span> <span class="s1">&#39;fizzbuzz(25)&#39;</span><span class="p">)</span>
   <span class="nd">@assertEqual</span><span class="p">(</span><span class="s1">&#39;FizzBuzz&#39;</span><span class="p">,</span> <span class="n">fizzbuzz</span><span class="p">(</span><span class="mi">60</span><span class="p">),</span> <span class="s1">&#39;fizzbuzz(60)&#39;</span><span class="p">)</span>
<span class="n">end</span> <span class="n">subroutine</span> <span class="n">test_fizzbuzz</span>
</pre></div>
</div>
</div></div>
</div>
</div>
<p><a class="reference external" href="../test-design/#exercise-6">In test-design.md:</a></p>
<div class="admonition-design-7-write-two-different-types-of-tests-for-randomness exercise important admonition" id="exercise-6">
<p class="admonition-title">Design-7: Write two different types of tests for randomness</p>
<p>Consider the code below which simulates playing
<a class="reference external" href="https://en.wikipedia.org/wiki/Yahtzee">Yahtzee</a> by using
random numbers. How would you go about testing it?</p>
<p>Try to write two types of tests:</p>
<ul class="simple">
<li><p>a <em>unit test</em> for the <code class="docutils literal notranslate"><span class="pre">roll_dice</span></code> function. Since it uses
random numbers, you will need to <strong>set the random seed</strong>,
pre-calculate what sequence of dice throws you get with that seed,
and use that in your test.</p></li>
<li><p>a test of the <code class="docutils literal notranslate"><span class="pre">yahtzee</span></code> function which considers the statistical
probability of obtaining a “Yahtzee” (5 dice with the same value
after three throws), which is around 4.6%. This test will be
an <em>integration test</em> since it tests multiple functions including the
random number generator itself.</p></li>
</ul>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-12-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-12-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-12-Qysr" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-12-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button><button aria-controls="panel-12-Ug==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-12-Ug==" name="Ug==" role="tab" tabindex="-1">R</button><button aria-controls="panel-12-SnVsaWE=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-12-SnVsaWE=" name="SnVsaWE=" role="tab" tabindex="-1">Julia</button></div><div aria-labelledby="tab-12-UHl0aG9u" class="sphinx-tabs-panel group-tab" id="panel-12-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">random</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">collections</span><span class="w"> </span><span class="kn">import</span> <span class="n">Counter</span>


<span class="k">def</span><span class="w"> </span><span class="nf">roll_dice</span><span class="p">(</span><span class="n">num_dice</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">[</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_dice</span><span class="p">)]</span>


<span class="k">def</span><span class="w"> </span><span class="nf">yahtzee</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Play yahtzee with 5 6-sided dice and 3 throws.</span>
<span class="sd">    Collect as many of the same dice side as possible.</span>
<span class="sd">    Returns the number of same sides.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># first throw</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">roll_dice</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
    <span class="n">most_common_side</span><span class="p">,</span> <span class="n">how_often</span> <span class="o">=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">result</span><span class="p">)</span><span class="o">.</span><span class="n">most_common</span><span class="p">(</span><span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>

    <span class="c1"># we keep the most common side</span>
    <span class="n">target_side</span> <span class="o">=</span> <span class="n">most_common_side</span>
    <span class="n">num_same_sides</span> <span class="o">=</span> <span class="n">how_often</span>
    <span class="k">if</span> <span class="n">num_same_sides</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
        <span class="k">return</span> <span class="mi">5</span>

    <span class="c1"># second and third throw</span>
    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]:</span>
        <span class="n">throw</span> <span class="o">=</span> <span class="n">roll_dice</span><span class="p">(</span><span class="mi">5</span> <span class="o">-</span> <span class="n">num_same_sides</span><span class="p">)</span>
        <span class="n">num_same_sides</span> <span class="o">+=</span> <span class="n">Counter</span><span class="p">(</span><span class="n">throw</span><span class="p">)[</span><span class="n">target_side</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">num_same_sides</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
            <span class="k">return</span> <span class="mi">5</span>

    <span class="k">return</span> <span class="n">num_same_sides</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">num_games</span> <span class="o">=</span> <span class="mi">100</span>

    <span class="n">winning_games</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
        <span class="nb">filter</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">5</span><span class="p">,</span>
            <span class="p">[</span><span class="n">yahtzee</span><span class="p">()</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">num_games</span><span class="p">)],</span>
        <span class="p">)</span>
    <span class="p">)</span>

    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;out of the </span><span class="si">{</span><span class="n">num_games</span><span class="si">}</span><span class="s2"> games, </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">winning_games</span><span class="p">)</span><span class="si">}</span><span class="s2"> got a yahtzee!&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-12-Qysr" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-12-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;cstdlib&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;random&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;tuple&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;vector&gt;</span>

<span class="cm">/* Roll a fair die n_dice times. The faces of the die can be set (default is 1 to 6).</span>
<span class="cm"> * The PRNG engine is moved in the function such that changes in its state are propagated back to the caller.</span>
<span class="cm"> */</span>
<span class="k">template</span><span class="w"> </span><span class="o">&lt;</span><span class="k">typename</span><span class="w"> </span><span class="nc">PRNGEngine</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">decltype</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">default_random_engine</span><span class="p">())</span><span class="o">&gt;</span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">roll_dice</span><span class="p">(</span>
<span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n_dice</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">faces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">},</span>
<span class="w">    </span><span class="n">PRNGEngine</span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">gen</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">default_random_engine</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">random_device</span><span class="p">()()))</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// create a fair die</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">weights</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="p">(</span><span class="n">faces</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span><span class="w"> </span><span class="mf">1.0</span><span class="p">);</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">fair_dice</span><span class="w"> </span><span class="o">=</span>
<span class="w">      </span><span class="n">std</span><span class="o">::</span><span class="n">discrete_distribution</span><span class="o">&lt;</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">weights</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span><span class="w"> </span><span class="n">weights</span><span class="p">.</span><span class="n">end</span><span class="p">());</span>

<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">rolls</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n_dice</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0u</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n_dice</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">rolls</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">faces</span><span class="p">[</span><span class="n">fair_dice</span><span class="p">(</span><span class="n">gen</span><span class="p">)];</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">rolls</span><span class="p">;</span>
<span class="p">}</span>

<span class="cm">/* count how many times each face comes up */</span>
<span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">count</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">toss</span><span class="p">,</span>
<span class="w">				</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">faces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">				    </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">})</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">face_counts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">faces</span><span class="p">.</span><span class="n">size</span><span class="p">(),</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">faces</span><span class="p">.</span><span class="n">size</span><span class="p">();</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">face_counts</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">count</span><span class="p">(</span><span class="n">toss</span><span class="p">.</span><span class="n">cbegin</span><span class="p">(),</span><span class="w"> </span><span class="n">toss</span><span class="p">.</span><span class="n">cend</span><span class="p">(),</span><span class="w"> </span><span class="n">faces</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">face_counts</span><span class="p">;</span>
<span class="p">}</span>

<span class="n">std</span><span class="o">::</span><span class="n">tuple</span><span class="o">&lt;</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="w"> </span><span class="n">yahtzee</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">n_dice</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">faces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">};</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">toss</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">faces</span><span class="p">](</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">n_dice</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">roll_dice</span><span class="p">(</span><span class="n">n_dice</span><span class="p">,</span><span class="w"> </span><span class="n">faces</span><span class="p">);</span><span class="w"> </span><span class="p">};</span>
<span class="w">  </span><span class="c1">// throw all dice</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">first_toss</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">toss</span><span class="p">(</span><span class="n">n_dice</span><span class="p">);</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">face_counts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">count</span><span class="p">(</span><span class="n">first_toss</span><span class="p">);</span>

<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">it_max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">max_element</span><span class="p">(</span><span class="n">face_counts</span><span class="p">.</span><span class="n">cbegin</span><span class="p">(),</span><span class="w"> </span><span class="n">face_counts</span><span class="p">.</span><span class="n">cend</span><span class="p">());</span>
<span class="w">  </span><span class="c1">// number of faces that showed the most</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">n_collected</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="n">it_max</span><span class="p">;</span>
<span class="w">  </span><span class="c1">// corresponding index in the array, will be used to get which face showed up</span>
<span class="w">  </span><span class="c1">// the most</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">idx_max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">distance</span><span class="p">(</span><span class="n">face_counts</span><span class="p">.</span><span class="n">cbegin</span><span class="p">(),</span><span class="w"> </span><span class="n">it_max</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// all 5 dice showed the same face! YAHTZEE!</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">n_collected</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_tuple</span><span class="p">(</span><span class="n">faces</span><span class="p">[</span><span class="n">idx_max</span><span class="p">],</span><span class="w"> </span><span class="n">n_collected</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// no yahtzee :(</span>
<span class="w">  </span><span class="c1">// we throw (n_dice - n_collected) dice</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">second_toss</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">toss</span><span class="p">(</span><span class="n">n_dice</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">n_collected</span><span class="p">);</span>
<span class="w">  </span><span class="n">n_collected</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">count</span><span class="p">(</span><span class="n">second_toss</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="n">faces</span><span class="p">[</span><span class="n">idx_max</span><span class="p">]})[</span><span class="mi">0</span><span class="p">];</span>
<span class="w">  </span><span class="c1">// YAHTZEE!</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">n_collected</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_tuple</span><span class="p">(</span><span class="n">faces</span><span class="p">[</span><span class="n">idx_max</span><span class="p">],</span><span class="w"> </span><span class="n">n_collected</span><span class="p">);</span>

<span class="w">  </span><span class="c1">// final chance</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">third_toss</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">toss</span><span class="p">(</span><span class="n">n_dice</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">n_collected</span><span class="p">);</span>
<span class="w">  </span><span class="n">n_collected</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">count</span><span class="p">(</span><span class="n">third_toss</span><span class="p">,</span><span class="w"> </span><span class="p">{</span><span class="n">faces</span><span class="p">[</span><span class="n">idx_max</span><span class="p">]})[</span><span class="mi">0</span><span class="p">];</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">make_tuple</span><span class="p">(</span><span class="n">faces</span><span class="p">[</span><span class="n">idx_max</span><span class="p">],</span><span class="w"> </span><span class="n">n_collected</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span><span class="w"> </span><span class="n">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">100</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">times</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">tie</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">times</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">yahtzee</span><span class="p">();</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;We got &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">times</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot; times in round &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">i</span>
<span class="w">	      </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">times</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;YAHTZEE in round &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">endl</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">EXIT_SUCCESS</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-12-Ug==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-12-Ug==" name="Ug==" role="tabpanel" tabindex="0"><div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="c1">#&#39; Roll a fair die num_dice times.</span>
<span class="c1">#&#39; Collect as many of the same dice side as possible.</span>
<span class="c1">#&#39;</span>
<span class="c1">#&#39; @return A vector of die throw results</span>
<span class="n">roll_dice</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kr">function</span><span class="p">(</span><span class="n">num_dice</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nf">ceiling</span><span class="p">(</span><span class="nf">runif</span><span class="p">(</span><span class="n">num_dice</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">,</span><span class="w"> </span><span class="m">6</span><span class="p">))</span>
<span class="p">}</span>

<span class="c1">#&#39; Play yahtzee with 5 6-sided dice and 3 throws.</span>
<span class="c1">#&#39; Collect as many of the same dice side as possible.</span>
<span class="c1">#&#39;</span>
<span class="c1">#&#39; @return The number of same sides</span>
<span class="n">yahtzee</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kr">function</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">res</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">roll_dice</span><span class="p">(</span><span class="m">5</span><span class="p">)</span>
<span class="w">  </span><span class="n">most_common_side</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">as.numeric</span><span class="p">(</span><span class="nf">names</span><span class="p">(</span><span class="nf">table</span><span class="p">(</span><span class="n">res</span><span class="p">)[</span><span class="nf">which.max</span><span class="p">(</span><span class="nf">table</span><span class="p">(</span><span class="n">res</span><span class="p">))]))[</span><span class="m">1</span><span class="p">]</span>
<span class="w">  </span><span class="n">how_often</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">as.vector</span><span class="p">(</span><span class="nf">table</span><span class="p">(</span><span class="n">res</span><span class="p">)[</span><span class="nf">which.max</span><span class="p">(</span><span class="nf">table</span><span class="p">(</span><span class="n">res</span><span class="p">))])[</span><span class="m">1</span><span class="p">]</span>

<span class="w">  </span><span class="c1"># we keep the most common side</span>
<span class="w">  </span><span class="n">target_side</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">most_common_side</span>
<span class="w">  </span><span class="n">num_same_sides</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">how_often</span>
<span class="w">  </span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="n">num_same_sides</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">5</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kr">return</span><span class="p">(</span><span class="m">5</span><span class="p">)</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="c1"># second and third throw</span>
<span class="w">  </span><span class="kr">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="kr">in</span><span class="w"> </span><span class="m">2</span><span class="o">:</span><span class="m">3</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">throw</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">roll_dice</span><span class="p">(</span><span class="m">5</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">num_same_sides</span><span class="p">)</span>
<span class="w">    </span><span class="n">num_same_sides</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">num_same_sides</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">throw</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">target_side</span><span class="p">)</span>

<span class="w">    </span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="n">num_same_sides</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">5</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kr">return</span><span class="p">(</span><span class="m">5</span><span class="p">)</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="kr">return</span><span class="p">(</span><span class="n">num_same_sides</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-12-SnVsaWE=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-12-SnVsaWE=" name="SnVsaWE=" role="tabpanel" tabindex="0"><div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">using</span><span class="w"> </span><span class="n">Random</span>

<span class="s">&quot;&quot;&quot;</span>
<span class="s">    roll_dice(n_dice::Int=5, sides=(1,2,3,4,5,6))</span>

<span class="s">Returns array of n_dice random integers corresponding to the sides of dice</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="k">function</span><span class="w"> </span><span class="n">roll_dice</span><span class="p">(</span><span class="n">n_dice</span><span class="o">::</span><span class="kt">Int</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="n">sides</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="p">[</span><span class="n">rand</span><span class="p">(</span><span class="n">sides</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="n">n_dice</span><span class="p">]</span>
<span class="k">end</span>

<span class="s">&quot;&quot;&quot;</span>
<span class="s">    yahtzee()</span>

<span class="s">Play Yahtzee with 5 6-sided dice and 3 throws.</span>
<span class="s">Collect as many of the same dice side as possible.</span>
<span class="s">Returns a tuple with the collected side (e.g. 4&#39;s) and</span>
<span class="s">how many of that side (between 1 and 5).</span>
<span class="s">&quot;&quot;&quot;</span>
<span class="k">function</span><span class="w"> </span><span class="n">yahtzee</span><span class="p">()</span>
<span class="w">    </span><span class="n">sides</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span>
<span class="w">    </span><span class="n">n_dice</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span>
<span class="w">    </span><span class="c"># we first throw all dice</span>
<span class="w">    </span><span class="n">first_throw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">roll_dice</span><span class="p">(</span><span class="n">n_dice</span><span class="p">,</span><span class="w"> </span><span class="n">sides</span><span class="p">)</span>
<span class="w">    </span><span class="c"># count how many times each side comes up</span>
<span class="w">    </span><span class="n">side_counts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="n">count</span><span class="p">(</span><span class="n">x</span><span class="o">-&gt;</span><span class="n">x</span><span class="o">==</span><span class="n">i</span><span class="p">,</span><span class="n">first_throw</span><span class="p">)</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">sides</span><span class="p">]</span>
<span class="w">    </span><span class="c"># collected_side is the dice side we will start collecting</span>
<span class="w">    </span><span class="n">n_collected</span><span class="p">,</span><span class="w"> </span><span class="n">collected_side</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">findmax</span><span class="p">(</span><span class="n">side_counts</span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">n_collected</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">5</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">collected_side</span><span class="p">,</span><span class="w"> </span><span class="n">n_collected</span>
<span class="w">    </span><span class="k">end</span>

<span class="w">    </span><span class="c"># now we throw n_dice-n_collected dice and hope to get more collected_side</span>
<span class="w">    </span><span class="n">second_throw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">roll_dice</span><span class="p">(</span><span class="n">n_dice</span><span class="o">-</span><span class="n">n_collected</span><span class="p">,</span><span class="w"> </span><span class="n">sides</span><span class="p">)</span>
<span class="w">    </span><span class="n">n_new_matches</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">count</span><span class="p">(</span><span class="n">x</span><span class="o">-&gt;</span><span class="n">x</span><span class="o">==</span><span class="n">collected_side</span><span class="p">,</span><span class="n">second_throw</span><span class="p">)</span>
<span class="w">    </span><span class="n">n_collected</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">n_new_matches</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">n_collected</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">5</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">collected_side</span><span class="p">,</span><span class="w"> </span><span class="n">n_collected</span>
<span class="w">    </span><span class="k">end</span>

<span class="w">    </span><span class="c"># final throw...</span>
<span class="w">    </span><span class="n">third_throw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">roll_dice</span><span class="p">(</span><span class="n">n_dice</span><span class="o">-</span><span class="n">n_collected</span><span class="p">,</span><span class="w"> </span><span class="n">sides</span><span class="p">)</span>
<span class="w">    </span><span class="n">n_new_matches</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">count</span><span class="p">(</span><span class="n">x</span><span class="o">-&gt;</span><span class="n">x</span><span class="o">==</span><span class="n">collected_side</span><span class="p">,</span><span class="n">third_throw</span><span class="p">)</span>
<span class="w">    </span><span class="n">n_collected</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">n_new_matches</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">collected_side</span><span class="p">,</span><span class="w"> </span><span class="n">n_collected</span>
<span class="k">end</span>


<span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="mi">10</span>
<span class="w">    </span><span class="n">collected_side</span><span class="p">,</span><span class="w"> </span><span class="n">n_collected</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">yahtzee</span><span class="p">()</span>
<span class="w">    </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;We got </span><span class="si">$n_collected</span><span class="s"> </span><span class="si">$collected_side</span><span class="s">&#39;s in this round&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="n">n_collected</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">5</span>
<span class="w">        </span><span class="n">println</span><span class="p">(</span><span class="s">&quot;Yay, it&#39;s a Yahtzee!&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="k">end</span>
<span class="k">end</span>
</pre></div>
</div>
</div></div>
<div class="admonition-solution solution important dropdown admonition" id="solution-6">
<p class="admonition-title">Solution</p>
<div class="sphinx-tabs docutils container">
<div aria-label="Tabbed content" class="closeable" role="tablist"><button aria-controls="panel-13-UHl0aG9u" aria-selected="true" class="sphinx-tabs-tab group-tab" id="tab-13-UHl0aG9u" name="UHl0aG9u" role="tab" tabindex="0">Python</button><button aria-controls="panel-13-Qysr" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-13-Qysr" name="Qysr" role="tab" tabindex="-1">C++</button><button aria-controls="panel-13-Ug==" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-13-Ug==" name="Ug==" role="tab" tabindex="-1">R</button><button aria-controls="panel-13-SnVsaWE=" aria-selected="false" class="sphinx-tabs-tab group-tab" id="tab-13-SnVsaWE=" name="SnVsaWE=" role="tab" tabindex="-1">Julia</button></div><div aria-labelledby="tab-13-UHl0aG9u" class="sphinx-tabs-panel group-tab" id="panel-13-UHl0aG9u" name="UHl0aG9u" role="tabpanel" tabindex="0"><div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">test_roll_dice</span><span class="p">():</span>
    <span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
    <span class="k">assert</span> <span class="n">roll_dice</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">]</span>
    <span class="k">assert</span> <span class="n">roll_dice</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
    <span class="k">assert</span> <span class="n">roll_dice</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span> <span class="o">==</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>


<span class="kn">import</span><span class="w"> </span><span class="nn">pytest</span>
<span class="k">def</span><span class="w"> </span><span class="nf">test_yahtzee</span><span class="p">():</span>
    <span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">n_tests</span> <span class="o">=</span> <span class="mi">1_000_000</span>

    <span class="n">winning_games</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
        <span class="nb">filter</span><span class="p">(</span>
            <span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">5</span><span class="p">,</span>
            <span class="p">[</span><span class="n">yahtzee</span><span class="p">()</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n_tests</span><span class="p">)],</span>
        <span class="p">)</span>
    <span class="p">)</span>

    <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">winning_games</span><span class="p">)</span> <span class="o">/</span> <span class="n">n_tests</span> <span class="o">==</span> <span class="n">pytest</span><span class="o">.</span><span class="n">approx</span><span class="p">(</span><span class="mf">0.046</span><span class="p">,</span> <span class="nb">abs</span><span class="o">=</span><span class="mf">0.01</span><span class="p">)</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-13-Qysr" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-13-Qysr" name="Qysr" role="tabpanel" tabindex="0"><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;random&gt;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;catch2/catch.hpp&gt;</span>

<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;yahtzee.hpp&quot;</span>

<span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">Catch</span><span class="o">::</span><span class="nn">literals</span><span class="p">;</span>

<span class="n">TEST_CASE</span><span class="p">(</span><span class="s">&quot;Tossing 5 dice&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;[toss]&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">n_dice</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="p">;</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">faces</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">};</span>

<span class="w">  </span><span class="c1">// we fix both the random device and the random engine.</span>
<span class="w">  </span><span class="c1">// the latter is necessary since the default random engine is implementation-dependent</span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">mt19937</span><span class="w"> </span><span class="n">prng</span><span class="p">;</span>
<span class="w">  </span><span class="n">prng</span><span class="p">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">1234</span><span class="p">);</span>

<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">expected_1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="p">{</span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">};</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">toss_1</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">roll_dice</span><span class="p">(</span><span class="n">n_dice</span><span class="p">,</span><span class="w"> </span><span class="n">faces</span><span class="p">,</span><span class="w"> </span><span class="n">prng</span><span class="p">);</span>
<span class="w">  </span><span class="n">REQUIRE</span><span class="p">(</span><span class="n">toss_1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">expected_1</span><span class="p">);</span>

<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">expected_2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">};</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">toss_2</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">roll_dice</span><span class="p">(</span><span class="n">n_dice</span><span class="p">,</span><span class="w"> </span><span class="n">faces</span><span class="p">,</span><span class="w"> </span><span class="n">prng</span><span class="p">);</span>
<span class="w">  </span><span class="n">REQUIRE</span><span class="p">(</span><span class="n">toss_2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">expected_2</span><span class="p">);</span>

<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">expected_3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="o">&gt;</span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">};</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">toss_3</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">roll_dice</span><span class="p">(</span><span class="n">n_dice</span><span class="p">,</span><span class="w"> </span><span class="n">faces</span><span class="p">,</span><span class="w"> </span><span class="n">prng</span><span class="p">);</span>
<span class="w">  </span><span class="n">REQUIRE</span><span class="p">(</span><span class="n">toss_3</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">expected_3</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">TEST_CASE</span><span class="p">(</span><span class="s">&quot;Distribution of Yahtzee&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;[yahtzee]&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// try a million throws and see if we get close</span>
<span class="w">  </span><span class="c1">// to the statistical average of 4.6%</span>
<span class="w">  </span><span class="c1">// (https://en.wikipedia.org/wiki/Yahtzee#Probabilities)</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">n_yahtzees</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">n_trials</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mf">1e6</span><span class="p">;</span>

<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">auto</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">n_trials</span><span class="p">;</span><span class="w"> </span><span class="o">++</span><span class="n">i</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">unsigned</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">times</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">tie</span><span class="p">(</span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">times</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">yahtzee</span><span class="p">();</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">times</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">5</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="o">++</span><span class="n">n_yahtzees</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="n">REQUIRE</span><span class="p">(</span><span class="w"> </span><span class="n">n_yahtzees</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">n_tests</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mf">0.046</span><span class="n">_a</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-13-Ug==" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-13-Ug==" name="Ug==" role="tabpanel" tabindex="0"><div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="kr">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="nf">require</span><span class="p">(</span><span class="n">testthat</span><span class="p">))</span><span class="w"> </span><span class="nf">install.packages</span><span class="p">(</span><span class="n">testthat</span><span class="p">)</span>

<span class="nf">test_that</span><span class="p">(</span><span class="s">&quot;dice is working&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nf">set.seed</span><span class="p">(</span><span class="m">42</span><span class="p">)</span>
<span class="w">  </span><span class="nf">expect_equal</span><span class="p">(</span><span class="nf">roll_dice</span><span class="p">(</span><span class="m">5</span><span class="p">),</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">6</span><span class="p">,</span><span class="w"> </span><span class="m">6</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="m">4</span><span class="p">))</span>
<span class="w">  </span><span class="nf">expect_equal</span><span class="p">(</span><span class="nf">roll_dice</span><span class="p">(</span><span class="m">5</span><span class="p">),</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">))</span>
<span class="w">  </span><span class="nf">expect_equal</span><span class="p">(</span><span class="nf">roll_dice</span><span class="p">(</span><span class="m">5</span><span class="p">),</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="m">6</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">))</span>
<span class="p">})</span>


<span class="nf">test_that</span><span class="p">(</span><span class="s">&quot;yahtzee is working&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">n_games</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">1e6</span><span class="w"> </span><span class="c1">#could be very slow, when in doubt change to 1e4</span>

<span class="w">  </span><span class="n">n_winning</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="nf">replicate</span><span class="p">(</span><span class="n">n_games</span><span class="p">,</span><span class="w"> </span><span class="nf">yahtzee</span><span class="p">())</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">5</span><span class="p">)</span>
<span class="w">  </span><span class="n">res</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="p">(</span><span class="n">n_winning</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">n_games</span><span class="p">)</span>
<span class="w">  </span><span class="n">expected</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">0.046</span>
<span class="w">  </span><span class="nf">expect_lt</span><span class="p">(</span><span class="nf">abs</span><span class="p">(</span><span class="n">res</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">expected</span><span class="p">),</span><span class="w"> </span><span class="m">0.003</span><span class="p">)</span>
<span class="p">})</span>
</pre></div>
</div>
</div><div aria-labelledby="tab-13-SnVsaWE=" class="sphinx-tabs-panel group-tab" hidden="true" id="panel-13-SnVsaWE=" name="SnVsaWE=" role="tabpanel" tabindex="0"><div class="highlight-julia notranslate"><div class="highlight"><pre><span></span><span class="k">using</span><span class="w"> </span><span class="n">Test</span>
<span class="k">using</span><span class="w"> </span><span class="n">Random</span>

<span class="n">include</span><span class="p">(</span><span class="s">&quot;yahtzee.jl&quot;</span><span class="p">)</span>

<span class="nd">@testset</span><span class="w"> </span><span class="s">&quot;test roll_dice&quot;</span><span class="w"> </span><span class="k">begin</span>
<span class="w">    </span><span class="c"># fix random seed</span>
<span class="w">    </span><span class="n">Random</span><span class="o">.</span><span class="n">seed!</span><span class="p">(</span><span class="mi">1234</span><span class="p">);</span>
<span class="w">    </span><span class="c"># known sequence for given seed</span>
<span class="w">    </span><span class="n">exp_first_throw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">]</span>
<span class="w">    </span><span class="n">exp_second_throw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">]</span>
<span class="w">    </span><span class="n">exp_third_throw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">]</span>

<span class="w">    </span><span class="n">n_dice</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span>
<span class="w">    </span><span class="n">sides</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span>
<span class="w">    </span><span class="n">throw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">roll_dice</span><span class="p">(</span><span class="n">n_dice</span><span class="p">,</span><span class="w"> </span><span class="n">sides</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@test</span><span class="w"> </span><span class="n">throw</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">exp_first_throw</span>
<span class="w">    </span><span class="n">throw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">roll_dice</span><span class="p">(</span><span class="n">n_dice</span><span class="p">,</span><span class="w"> </span><span class="n">sides</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@test</span><span class="w"> </span><span class="n">throw</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">exp_second_throw</span>
<span class="w">    </span><span class="n">throw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">roll_dice</span><span class="p">(</span><span class="n">n_dice</span><span class="p">,</span><span class="w"> </span><span class="n">sides</span><span class="p">)</span>
<span class="w">    </span><span class="nd">@test</span><span class="w"> </span><span class="n">throw</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">exp_third_throw</span>
<span class="k">end</span>

<span class="nd">@testset</span><span class="w"> </span><span class="s">&quot;testing yahtzee&quot;</span><span class="w"> </span><span class="k">begin</span>
<span class="w">    </span><span class="c"># try a million throws and see if we get close</span>
<span class="w">    </span><span class="c"># to the statistical average of 4.6%</span>
<span class="w">    </span><span class="c"># (https://en.wikipedia.org/wiki/Yahtzee#Probabilities)</span>
<span class="w">    </span><span class="n">n_yahtzees</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="n">n_tests</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1_000_000</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="mi">1</span><span class="o">:</span><span class="n">n_tests</span>
<span class="w">        </span><span class="n">collected_side</span><span class="p">,</span><span class="w"> </span><span class="n">n_collected</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">yahtzee</span><span class="p">()</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="n">n_collected</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">5</span>
<span class="w">            </span><span class="n">n_yahtzees</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="k">end</span>
<span class="w">    </span><span class="k">end</span>
<span class="w">    </span><span class="nd">@test</span><span class="w"> </span><span class="n">n_yahtzees</span><span class="o">/</span><span class="n">n_tests</span><span class="w"> </span><span class="o">≈</span><span class="w"> </span><span class="mf">0.046</span><span class="w"> </span><span class="n">atol</span><span class="o">=</span><span class="mf">0.001</span>
<span class="k">end</span>
</pre></div>
</div>
</div></div>
</div>
</div>
<p><a class="reference external" href="../test-design/#exercise-7">In test-design.md:</a></p>
<div class="admonition-design-8-design-but-not-write-an-end-to-end-test-for-the-uniq-program exercise important admonition" id="exercise-7">
<p class="admonition-title">Design-8: Design (but not write) an end-to-end test for the uniq program</p>
<p>To have a tangible example, let us consider the <code class="docutils literal notranslate"><span class="pre">uniq</span></code> command. This command
can read a file or an input stream and remove consecutive repetition.
The program behind <code class="docutils literal notranslate"><span class="pre">uniq</span></code> has been written by somebody else, it probably contains
some functions, but we will not look into it but regard it as “black box”.</p>
<p>If we have a file called <code class="docutils literal notranslate"><span class="pre">repetitive-text.txt</span></code> containing:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nb">all</span> <span class="n">together</span> <span class="n">now</span><span class="p">)</span> <span class="nb">all</span> <span class="n">together</span> <span class="n">now</span>
<span class="p">(</span><span class="nb">all</span> <span class="n">together</span> <span class="n">now</span><span class="p">)</span> <span class="nb">all</span> <span class="n">together</span> <span class="n">now</span>
<span class="p">(</span><span class="nb">all</span> <span class="n">together</span> <span class="n">now</span><span class="p">)</span> <span class="nb">all</span> <span class="n">together</span> <span class="n">now</span>
<span class="p">(</span><span class="nb">all</span> <span class="n">together</span> <span class="n">now</span><span class="p">)</span> <span class="nb">all</span> <span class="n">together</span> <span class="n">now</span>
<span class="p">(</span><span class="nb">all</span> <span class="n">together</span> <span class="n">now</span><span class="p">)</span> <span class="nb">all</span> <span class="n">together</span> <span class="n">now</span>
<span class="n">another</span> <span class="n">line</span>
<span class="n">another</span> <span class="n">line</span>
<span class="n">another</span> <span class="n">line</span>
<span class="n">another</span> <span class="n">line</span>
<span class="n">intermission</span>
<span class="n">more</span> <span class="n">repetition</span>
<span class="n">more</span> <span class="n">repetition</span>
<span class="n">more</span> <span class="n">repetition</span>
<span class="n">more</span> <span class="n">repetition</span>
<span class="n">more</span> <span class="n">repetition</span>
<span class="p">(</span><span class="nb">all</span> <span class="n">together</span> <span class="n">now</span><span class="p">)</span> <span class="nb">all</span> <span class="n">together</span> <span class="n">now</span>
<span class="p">(</span><span class="nb">all</span> <span class="n">together</span> <span class="n">now</span><span class="p">)</span> <span class="nb">all</span> <span class="n">together</span> <span class="n">now</span>
</pre></div>
</div>
<p>… then feeding this input file to <code class="docutils literal notranslate"><span class="pre">uniq</span></code> like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>$ uniq &lt; repetitive-text.txt
</pre></div>
</div>
<p>… will produce the following output with repetitions removed:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="nb">all</span> <span class="n">together</span> <span class="n">now</span><span class="p">)</span> <span class="nb">all</span> <span class="n">together</span> <span class="n">now</span>
<span class="n">another</span> <span class="n">line</span>
<span class="n">intermission</span>
<span class="n">more</span> <span class="n">repetition</span>
<span class="p">(</span><span class="nb">all</span> <span class="n">together</span> <span class="n">now</span><span class="p">)</span> <span class="nb">all</span> <span class="n">together</span> <span class="n">now</span>
</pre></div>
</div>
<p>How would you write an end-to-end test for <code class="docutils literal notranslate"><span class="pre">uniq</span></code>?</p>
</div>
<p><a class="reference external" href="../test-design/#exercise-8">In test-design.md:</a></p>
<div class="admonition-design-9-more-end-to-end-testing exercise important admonition" id="exercise-8">
<p class="admonition-title">Design-9: More end-to-end testing</p>
<ul class="simple">
<li><p>Now imagine a code which reads numbers and produces some (floating
point) numbers. How would you test that?</p></li>
<li><p>How would you test a code end-to-end which produces images?</p></li>
</ul>
</div>
<p><a class="reference external" href="../test-design/#exercise-9">In test-design.md:</a></p>
<div class="admonition-design-10-create-an-actual-end-to-end-test exercise important admonition" id="exercise-9">
<p class="admonition-title">Design-10: Create an actual end-to-end test</p>
<p>Often, you can include tests that run your whole workflow or program.
For example, you might include sample data and check the output
against what you expect.  (including sample data is a great idea
anyway, so this helps a lot!)</p>
<p>We’ll use the word-count example repository
<a class="reference external" href="https://github.com/coderefinery/word-count">https://github.com/coderefinery/word-count</a>.</p>
<p>As a reminder, you can run the script like this to get some output,
which prints to standard output (the terminal):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python3<span class="w"> </span>code/count.py<span class="w"> </span>data/abyss.txt
</pre></div>
</div>
<p>Your goal is to make a test that can run this and let you know if it’s
successful or not.  You could use Python, or you could use shell
scripting.  You can test if these two lines are in the output: <code class="docutils literal notranslate"><span class="pre">the</span> <span class="pre">4044</span></code> and <code class="docutils literal notranslate"><span class="pre">and</span> <span class="pre">2807</span></code>.</p>
<p>Python hint:
<a class="reference external" href="https://docs.python.org/3/library/subprocess.html#subprocess.check_output">subprocess.check_output</a>
will run a command and return its output as a string.</p>
<p>Bash hint: <code class="docutils literal notranslate"><span class="pre">COMMAND</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">&quot;PATTERN&quot;</span></code> (“pipe to grep”) will be true if
the pattern is in the command.</p>
<div class="admonition-solution solution important dropdown admonition" id="solution-7">
<p class="admonition-title">Solution</p>
<p>There are two solutions in the repository already, in the <code class="docutils literal notranslate"><span class="pre">tests/</span></code>
dierectory <a class="reference external" href="https://github.com/coderefinery/word-count">https://github.com/coderefinery/word-count</a>, one in Python
and one in bash shell.  Neither of these are a very advanced or
perfect solution, and you could integrate them with pytest or whatever
other test framework you use.</p>
<p>The shell one works with shell and prints a bit more output:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sh<span class="w"> </span>tests/end-to-end-shell.sh
<span class="go">the 4044</span>
<span class="go">Success: &#39;the&#39; found correct number of times</span>
<span class="go">and 2807</span>
<span class="go">Success: &#39;and&#39; found correct number of times</span>
<span class="go">Success</span>
</pre></div>
</div>
<p>The Python one:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>python3<span class="w"> </span>tests/end-to-end-python.py
<span class="go">Success</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="optional-full-cycle-collaborative-workflow">
<h3>(Optional) Full-cycle collaborative workflow<a class="headerlink" href="#optional-full-cycle-collaborative-workflow" title="Link to this heading"></a></h3>
<p><a class="reference external" href="../full-cycle-ci/#exercise-0">In full-cycle-ci.md:</a></p>
<div class="admonition-fullci-1-create-and-use-a-continuous-integration-workflow-on-github-or-gitlab-with-pull-requests-and-issues exercise important admonition" id="exercise-0">
<p class="admonition-title">FullCI-1: Create and use a continuous integration workflow on GitHub or GitLab with pull requests and issues</p>
<p>This is an expanded version of the <a class="reference internal" href="../continuous-integration/"><span class="doc">automated testing demonstration</span></a>.
The exercise is performed in a collaborative circle within the exercise group
(breakout room).</p>
<p>The exercise takes 20-30 minutes.</p>
<p>In this exercise, everybody will:</p>
<p><strong>A.</strong> Create a repository on GitHub/GitLab (everybody should use a <strong>different repository name</strong> for their repository)
<strong>B.</strong> Commit code to the repository and set up tests with GitHub Actions/ GitLab CI
<strong>C.</strong> Everybody will find a bug in their repository and open an issue in their repository
<strong>D.</strong> Then each one will clone the repo of one of their exercise partners, fix the bug,
and open a pull request (GitHub)/ merge request (GitLab)
<strong>E.</strong> Everybody then merges their co-worker’s change</p>
</div>
<p><a class="reference external" href="../full-cycle-ci/#exercise-1">In full-cycle-ci.md:</a></p>
<div class="admonition-optional-fullci-2-add-a-license-file-to-the-previous-exercise-s-repository exercise important admonition" id="exercise-1">
<p class="admonition-title">(optional) FullCI-2: Add a license file to the previous exercise’s repository</p>
<p>In the <a class="reference external" href="https://cicero.xyz/v3/remark/0.14.0/github.com/coderefinery/social-coding/master/talk.md/">Social coding and open software</a>
lesson we learn how important it is to add a LICENSE file.</p>
<p>Your goal:</p>
<ul class="simple">
<li><p>You discover that your coworker’s repository does not have a LICENSE file.</p></li>
<li><p>Open an issue and suggest a LICENSE.</p></li>
<li><p>Then add a LICENSE via a pull/merge request, referencing the issue number.</p></li>
</ul>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../full-cycle-ci/" class="btn btn-neutral float-left" title="(Optional) Full-cycle collaborative workflow" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../quick-reference/" class="btn btn-neutral float-right" title="Quick Reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright CodeRefinery contributors.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>